<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Linking Against DLLs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="Cygwin User's Guide"
HREF="cygwin-ug-net.html"><LINK
REL="UP"
TITLE="Building and Using DLLs"
HREF="dll.html"><LINK
REL="PREVIOUS"
TITLE="Building and Using DLLs"
HREF="dll.html"><LINK
REL="NEXT"
TITLE="Defining Windows Resources"
HREF="windres.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="dll.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Building and Using DLLs</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="windres.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="DLL-LINK"
>Linking Against DLLs</A
></H1
><P
>If you have an existing DLL already, you need to build a
cygwin-compatible import library (yeah, I know, the supplied ones
should work, but you might not have them) to link against.
Unfortunately, there is not yet any tool to do this automatically.
However, you can get most of the way by creating a .def file with
these commands (you might need to do this in <TT
CLASS="FILENAME"
>bash</TT
>
for the quoting to work right):</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>echo EXPORTS &#62; foo.def
nm foo.dll | grep ' T _' | sed 's/.* T _//' &#62;&#62; foo.def</PRE
></TD
></TR
></TABLE
><P
>Once you have the <TT
CLASS="FILENAME"
>.def</TT
> file, you can create
an import library from it like this:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>dlltool --def foo.def --dllname foo.dll --output-lib foo.a</PRE
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="dll.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-ug-net.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="windres.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Building and Using DLLs</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="dll.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Defining Windows Resources</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>