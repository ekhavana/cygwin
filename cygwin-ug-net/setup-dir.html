<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Directory Structure</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REL="HOME"
TITLE="Cygwin User's Guide"
HREF="cygwin-ug-net.html"><LINK
REL="UP"
TITLE="Setting Up Cygwin"
HREF="setup-net.html"><LINK
REL="PREVIOUS"
TITLE="Installing the source code"
HREF="installing-source.html"><LINK
REL="NEXT"
TITLE="Environment Variables"
HREF="setup-env.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="installing-source.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Setting Up Cygwin</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="setup-env.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="SETUP-DIR"
>Directory Structure</A
></H1
><P
>Cygwin knows how to emulate a standard UNIX directory structure, to
some extent.  This is done through the use of mount tables that map
Win32 paths to POSIX ones.  The mount table may be set up and modified
with the <B
CLASS="COMMAND"
>mount</B
> command. This section explains how
to properly organize the structure. </P
><P
> When you set up the system you should decide where you want the
root to be mapped.  Possible choices are the root of your Windows
system, such as
<TT
CLASS="FILENAME"
>c:</TT
> or a directory such as
<TT
CLASS="FILENAME"
>c:\progra~1\root</TT
>.</P
><P
>Execute the following commands inside bash as it is difficult to
change the position of the root from the Windows command prompt.
Changing the mount points may invalidate <TT
CLASS="ENVAR"
>PATH</TT
>, if this
happens simply exit and relaunch bash.  Create the directory if
needed, then <B
CLASS="COMMAND"
>umount /</B
> the current root and 
<B
CLASS="COMMAND"
>mount</B
> it in its new place.  You also have to decide if
you want to use text or binary mode.  </P
><P
>Next, create the traditional main UNIX directories, with
the following command (in some shells it is necessary to issue
separate <B
CLASS="COMMAND"
>mkdir</B
> commands, each with a single
argument).</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>/$</TT
> <TT
CLASS="USERINPUT"
><B
>mkdir /tmp /bin /etc /var /usr</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>Next we will initialize the content of these directories.</P
><P
>You should make sure that you always have a valid
<TT
CLASS="FILENAME"
>/tmp</TT
> directory.  If you want to avoid creating a
real <TT
CLASS="FILENAME"
>/tmp</TT
>, you can use the
<B
CLASS="COMMAND"
>mount</B
> utility to point <TT
CLASS="FILENAME"
>/tmp</TT
> to
another directory, such as <TT
CLASS="FILENAME"
>c:\tmp</TT
>, or create a
symbolic link <TT
CLASS="FILENAME"
>/tmp</TT
> to point to such a directory.</P
><P
>The <TT
CLASS="FILENAME"
>/bin</TT
> directory should contain the shell
<TT
CLASS="FILENAME"
>sh.exe</TT
>.  You have three choices.  The first is to
copy this program from the Cygnus <TT
CLASS="FILENAME"
>bin</TT
> directory.
The second is to use <B
CLASS="COMMAND"
>mount</B
> to mount the Cygnus
<TT
CLASS="FILENAME"
>bin</TT
> directory to <TT
CLASS="FILENAME"
>/bin</TT
> (the
advantage of this approach is that your <TT
CLASS="ENVAR"
>PATH</TT
> will be
shorter inside bash).  The third is to make <TT
CLASS="FILENAME"
>/bin</TT
> a
symbolic link to the Cygnus <TT
CLASS="FILENAME"
>bin</TT
> directory.</P
><P
>Note that Cygwin comes with two shells: <B
CLASS="COMMAND"
>bash.exe</B
> and
<B
CLASS="COMMAND"
>sh.exe</B
>, which is based on <B
CLASS="COMMAND"
>ash</B
>.  The
system is faster when <B
CLASS="COMMAND"
>ash</B
> is used as the 
non-interactive shell. 
The only functionality supported in <B
CLASS="COMMAND"
>ash</B
> is that 
of the traditional <B
CLASS="COMMAND"
>sh</B
>.  
In case of trouble with <B
CLASS="COMMAND"
>ash</B
> make
<B
CLASS="COMMAND"
>sh.exe</B
> point to <B
CLASS="COMMAND"
>bash.exe</B
>.</P
><P
>We now turn to <TT
CLASS="FILENAME"
>/etc</TT
>.  You may want to copy in it
the <TT
CLASS="FILENAME"
>termcap</TT
> file from the Cygnus
<TT
CLASS="FILENAME"
>etc</TT
> directory, although the defaults built into
the programs suffice for the normal console.  You may also use
<B
CLASS="COMMAND"
>mount</B
> or create as symbolic link to the Cygnus
<TT
CLASS="FILENAME"
>etc</TT
>, just as for <TT
CLASS="FILENAME"
>/bin</TT
>
above.</P
><P
> Under Windows NT, if you want to create 
<TT
CLASS="FILENAME"
>/etc/passwd</TT
> and <TT
CLASS="FILENAME"
>/etc/group</TT
> 
(i.e. so that <B
CLASS="COMMAND"
>whoami</B
> works and 
<B
CLASS="COMMAND"
>ls -l</B
> replaces the UID with a name) based on the accounts local to the machine, just do this:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>/$</TT
> <TT
CLASS="USERINPUT"
><B
>cd /etc</B
></TT
>
<TT
CLASS="PROMPT"
>/etc$</TT
> <TT
CLASS="USERINPUT"
><B
>mkpasswd -l &#62; /etc/passwd</B
></TT
>
<TT
CLASS="PROMPT"
>/etc$</TT
> <TT
CLASS="USERINPUT"
><B
>mkgroup -l &#62; /etc/group</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>If you are logging in based on an NT network domain, and want to
also create entries in <TT
CLASS="FILENAME"
>/etc/passwd</TT
> and
<TT
CLASS="FILENAME"
>/etc/group</TT
> based on all the accounts in the
domain, then after creating local entries do this:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>/$</TT
> <TT
CLASS="USERINPUT"
><B
>cd /etc</B
></TT
>
<TT
CLASS="PROMPT"
>/etc$</TT
> <TT
CLASS="USERINPUT"
><B
>mkpasswd -d &#62;&#62; /etc/passwd</B
></TT
>
<TT
CLASS="PROMPT"
>/etc$</TT
> <TT
CLASS="USERINPUT"
><B
>mkgroup -d &#62;&#62; /etc/group</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>Alternatively, to add only your account to the passwd file,
assuming your NT name is "my_ntusername", instead of the above
<B
CLASS="COMMAND"
>mkpasswd</B
> you should do:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>/$</TT
> <TT
CLASS="USERINPUT"
><B
>cd /etc</B
></TT
>
<TT
CLASS="PROMPT"
>/etc$</TT
> <TT
CLASS="USERINPUT"
><B
>mkpasswd -d | grep my_ntusername &#62;&#62; /etc/passwd</B
></TT
></PRE
></TD
></TR
></TABLE
><P
> Future changes to your NT registry or network domain will NOT be reflected in
<TT
CLASS="FILENAME"
>/etc/passwd</TT
> or <TT
CLASS="FILENAME"
>/etc/group </TT
> after
this so you may want to regenerate these files periodically.  Under Windows
9x, you can create and edit these files with a text editor.  </P
><P
>The <B
CLASS="COMMAND"
>who</B
> command requires the
<TT
CLASS="FILENAME"
>/var/run/utmp</TT
> to exist.
Create it if you wish.
The system also logs information in <TT
CLASS="FILENAME"
>/var/log/wtmp</TT
>,
if it exists.</P
><P
>The <TT
CLASS="FILENAME"
>/usr</TT
> directory is not used by the Cygwin
system but it is a standard place to install optional packages.</P
><P
>You may also want to mount directories such as <TT
CLASS="FILENAME"
>/a</TT
>
and <TT
CLASS="FILENAME"
>/d</TT
> to refer to your local and network drives.</P
><P
>You do not need to create <TT
CLASS="FILENAME"
>/dev</TT
> in order to set up
mounts for devices such as <TT
CLASS="FILENAME"
>/dev/null</TT
> as these
are already automatically simulated inside the Cygwin library.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="installing-source.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-ug-net.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="setup-env.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Installing the source code</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="setup-net.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Environment Variables</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>