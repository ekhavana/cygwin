<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Debugging Cygwin Programs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="Cygwin User's Guide"
HREF="cygwin-ug-net.html"><LINK
REL="UP"
TITLE="Programming with Cygwin"
HREF="programming.html"><LINK
REL="PREVIOUS"
TITLE="Programming with Cygwin"
HREF="programming.html"><LINK
REL="NEXT"
TITLE="Building and Using DLLs"
HREF="dll.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="programming.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 4. Programming with Cygwin</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="dll.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="GDB"
>Debugging Cygwin Programs</A
></H1
><P
>When your program doesn't work right, it usually has a "bug" in
it, meaning there's something wrong with the program itself that is
causing unexpected results or crashes.  Diagnosing these bugs and
fixing them is made easy by special tools called
<I
CLASS="EMPHASIS"
>debuggers</I
>.  In the case of Cygwin, the debugger
is GDB, which stands for "GNU DeBugger".  This tool lets you run your
program in a controlled environment where you can investigate the
state of your program while it is running or after it crashes.</P
><P
>Before you can debug your program, you need to prepare your
program for debugging.  What you need to do is add
<TT
CLASS="LITERAL"
>-g</TT
> to all the other flags you use when compiling
your sources to objects.</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 4-2. Compiling with -g</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$</TT
> gcc -g -O2 -c myapp.c
<TT
CLASS="PROMPT"
>$</TT
> gcc -g myapp.c -o myapp</PRE
></TD
></TR
></TABLE
></DIV
><P
>What this does is add extra information to the objects (they get
much bigger too) that tell the debugger about line numbers, variable
names, and other useful things.  These extra symbols and debugging
information give your program enough information about the original
sources so that the debugger can make debugging much easier for
you.</P
><P
>In Windows versions of GNUPro, GDB comes with a full-featured
graphical interface.  In Cygwin Net distributions, GDB is only
available as a command-line tool.  To invoke GDB, simply type
<B
CLASS="COMMAND"
>gdb myapp.exe</B
> at the command prompt.  It will
display some text telling you about itself, then
<TT
CLASS="LITERAL"
>(gdb)</TT
> will appear to prompt you to enter commands.
Whenever you see this prompt, it means that gdb is waiting for you to
type in a command, like <B
CLASS="COMMAND"
>run</B
> or
<B
CLASS="COMMAND"
>help</B
>.  Oh <TT
CLASS="LITERAL"
>:-)</TT
> type
<B
CLASS="COMMAND"
>help</B
> to get help on the commands you can type in,
or read the [<SPAN
CLASS="CITATION"
>GDB User's Manual</SPAN
>] for a complete
description of GDB and how to use it.</P
><P
>If your program crashes and you're trying to figure out why it
crashed, the best thing to do is type <B
CLASS="COMMAND"
>run</B
> and let
your program run.  After it crashes, you can type
<B
CLASS="COMMAND"
>where</B
> to find out where it crashed, or
<B
CLASS="COMMAND"
>info locals</B
> to see the values of all the local
variables.  There's also a <B
CLASS="COMMAND"
>print</B
> that lets you look
at individual variables or what pointers point to.</P
><P
>If your program is doing something unexpected, you can use the
<B
CLASS="COMMAND"
>break</B
> command to tell gdb to stop your program when it
gets to a specific function or line number:</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 4-3. "break" in gdb</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>(gdb)</TT
> break my_function
<TT
CLASS="PROMPT"
>(gdb)</TT
> break 47</PRE
></TD
></TR
></TABLE
></DIV
><P
>Now, when you type <B
CLASS="COMMAND"
>run</B
> your program will stop
at that "breakpoint" and you can use the other gdb commands to look at
the state of your program at that point, modify variables, and
<B
CLASS="COMMAND"
>step</B
> through your program's statements one at a
time.</P
><P
>Note that you may specify additional arguments to the
<B
CLASS="COMMAND"
>run</B
> command to provide command-line arguments to
your program.  These two cases are the same as far as your program is
concerned:</P
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 4-4. Debugging with command line arguments</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$</TT
> myprog -t foo --queue 47

<TT
CLASS="PROMPT"
>$</TT
> gdb myprog
<TT
CLASS="PROMPT"
>(gdb)</TT
> run -t foo --queue 47</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="programming.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-ug-net.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="dll.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Programming with Cygwin</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programming.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Building and Using DLLs</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>