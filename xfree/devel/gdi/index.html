<html lang="en-US">

<meta name="Author" content="Harold L Hunt II">
<meta name="keywords" content="Windows GDI, GDI, xfree86, Cygwin, X, x window system, microsoft, windows, x/server, xserver, x-server, Cygwin/XFree86, Win32, Win32API, Win32 API, dfr, development framework, development framework release">
<meta name="description" content="Cygwin/XFree86 Development Framework Release 1"> 

<head>
<title>
Cygwin/XFree86 GDI Development Framework
</title>

<style type="text/css">
<!--
body	{font-family: Arial, Helvetica, sans-serif}
p	{font-family: Arial, Helvetica, sans-serif; font-size: small}
a	{font-family: Arial, Helvetica, sans-serif}
a:hover {font-family: Arial, Helvetica, sans-serif; text-decoration: none}
-->
</style>

</head>

<body>

<h3>
<a href="http://sources.redhat.com/cygwin/xfree/">
Cygwin/XFree86</a> GDI Development Framework
</h3>

<p>
Last updated: 24Feb2001 1430 EST
</p>

<p>
The initial release of the development framework is now available.  Development framework release 1 includes buildable and runable source code that allows any interested developers to begin implementing the Device Dependent X (DDX) functions using Windows GDI functions; development framework release 2 will hopefully add support for DirectDraw graphics calls.  The development framework release is not a fully implemented and operational X Server; rather, as the name implies, the framework release contains place holders for most of the functions that we must implement to have a fully operational X Server.

<p>
Development efforts for the framework should concentrate on using Windows GDI function calls for graphics primitives (lines, arcs, polygons, etc.) and DirectDraw function calls for bit block transfers and bitmap operations; more information on which DDX functions nearly map to Windows GDI calls can be found in the document titled <i>Design of eXcursion Version 2 for Windows, Windows NT, and Windows 95</i>; a link to said document is included near the end of this announcement.

<p>
Development framework releases produce XWin.exe only; xf_dx.dll is not needed by the development framework releases, as much effort has been put into allowing Win32 API calls directly from XWin.exe, rather than indirectly through a seperate DLL like xf_dx.dll.  Development framework releases do not currently support DirectDraw function calls; a ddraw.h header must be added to Cygwin to allow DirectDraw function calls.

<h4>
Downloading Development Framework Release 1
</h4>
<h5>
Primary Download Site
</h5>
<table>
<tbody>

<tr>
<td>
<a href="http://www.msu.edu/~huntharo/xwin/dfr/usr-include-w32api-diffs-26Nov2000.tar.bz2">
usr-include-w32api-diffs-26Nov2000.tar.bz2
</a>
</td>
</tr>

<tr>
<td>
<a href="http://www.msu.edu/~huntharo/xwin/dfr/xc-include-diffs-26Nov2000.tar.bz2">
xc-include-diffs-26Nov2000.tar.bz2
</a>
</td>
</tr>

<tr>
<td>
<a href="http://www.msu.edu/~huntharo/xwin/dfr/xc-programs-Xserver-diffs-26Nov2000.tar.bz2">
xc-programs-Xserver-diffs-26Nov2000.tar.bz2
</a>
</td>
</tr>

<tr>
<td>
<a href="http://www.msu.edu/~huntharo/xwin/dfr/xwin-src-26Nov2000.tar.bz2">
xwin-src-26Nov2000.tar.bz2
</a>
</td>
</tr>

</tbody>
</table>

<h5>
Secondary Download Site
</h5>
<a href="ftp://sources.redhat.com/pub/cygwin/xfree/framework-xf86/">
ftp://sources.redhat.com/pub/cygwin/xfree/framework-xf86/
</a>

<h4>
Installing Development Framework Release 1
</h4>
The development framework consists of several tarballs, including whole
	source files as well as patches to existing header files
	and Imakefiles.

<p>
Installing patch tarballs (install-dir-diffs.tar.bz2):
<ul>
<li>cd install-dir/
<li>bunzip2 install-dir-diffs.tar.bz2
<li>tar -xf install-dir-diffs.tar
<li>patch original-file original-file.diff
</ul>

<p>
Installing whole files (install-dir-src.tar.bz2):
<ul>
<li>cd install-dir/
<li>cd ..
<li>mv install-dir install-dir-backup
<li>mkdir install-dir
<li>cd install-dir/
<li>bunzip2 install-dir-src.tar.bz2
<li>tar -xf install-dir-src.tar
</ul>

<H4>
Building Development Framework Release 1
</H4>
If you already have a successful build enviroment for XWin.exe, you
	need only to rebuild your makefiles after unpacking the
	development framework files:
<ul>
<li>cd xc/programs/
<li>make Makefiles (takes between five and fifteen minutes)
</ul>

<p>
If you have never built XWin.exe you need to run the following commands
	to prepare your build environment:
<ul>
<li>cd xc/
<li>make World (takes several hours on my P3/550 w/256MB)
</ul>

<p>
XWin.exe is not built by default; enter the following commands to build XWin.exe:
<ul>
<li>cd xc/programs/Xserver/
<li>make XWin.exe (takes between one minute and five minutes)
</ul>

<p>
Expected behaviour of the compiled development framework release XWin.exe:
<ul>
<li>A Windows window is drawn
<li>The Window is filled with black lines
<li>Status messages are displayed on your console 
<li>Windows cursor disappears on startup, toggles as you pass in and out of
	the client area of the Cygwin/XFree86 window
<li>Execution may be *very* slow on Win9X machines as it is expensive to
	display status messages to the Win9X console; Win2000 does
	not appear to have this problem
</ul>

<p></p>

<h4>
How to Contribute
</h4>

<ol>

<li>Install Cygwin and Cygwin/XFree86; the
<a href="http://www.msu.edu/~huntharo/xwin/docs/ug/">
Cygwin/XFree86 User's Guide</a>
will be helpful.

<li>Get the latest XFree86 source tree from 
<a href="http://www.xfree86.org/cvs/">
CVS</a>; I recommend using the pserver method to get the tree with Cygwin.  My connection is capable of 24 KBytes/second, but I get about 4 Bytes/second when I'm pulling an XFree86 CVS tree; it usually take me between 12 and 24 hours to pull a fresh tree.

<li>You're going to need an editor that is capable of handling UNIX-style end-of-line characters on a Windows machine; two good candidates for this are 
<a href="http://www.gnu.org/software/emacs/windows/ntemacs.html">
NTemacs</a> 
and
<a href="http://www.xemacs.org/">
XEmacs for Windows</a>
.

<li>Get <I>Definition of the Porting Layer for X v11 Sample Server</I>, April 8, 1994, Digital Equipment Corporation, MIT X Consortium, X Consortium.  There is a link to this document below.

<li>Consider purchasing <I>X Window System - The Complete Reference to Xlib, X Protocol, ICCCM, and XLFD for X11R5</I>, 3rd Edition, 1992, Butterworth-Heinemann and Digital Press, ISBN 1-55558-088-2.  This book costs about $60; it has been replaced by a three book set costing around $180; for most people the single book will be enough, considering the price difference.  Note that these books are available online, in PDF form, for free; the book is nice because it is much smaller and tidier than any version that you could print yourself.

<li>Consider purchasing, if you don't already own it, <I>Programming Windows</I>, 5th Edition, 1999, Charles Petzold, Microsoft Press, ISBN 1-57231-995-X.

<li>
<a href="http://msdn.microsoft.com/">
MSDN Library Online</a>
had sufficient DirectDraw documentation for me to learn how to use it; in hindsight, I could have saved some time with a more in-depth book on DirectDraw, alas, I have no such book so I cannot recommend one :(

<li>Read 
<a href="http://www.digital.com/DTJL03/DTJL03PF.PDF">
Design of eXcursion Version 2 for Windows, Windows NT, and Windows 95</a>.  We are attempting to create a similar server; the primary differences between our implementation and eXcursion are that the identified shortcomings of the Windows GDI have been addressed for us by DirectDraw.

<li>Peruse the code in xc/programs/Xserver/hw/xwin/, paying particular attention to wingetsp.c, winsetsp.c, and winfillsp.c, as these three files contain the absolute minimum of functions that must be implemented to get a somewhat working X Server.  Note that input processing code is already finished and working; we only need to work on the output code.

<li>Pay attention to the mailing list and post your discoveries, if they have not already been posted.

<li>Enjoy!
</OL>

<h4>
Developer Documentation Links
</h4>

<hr>
Online documents not generally available in print.
All of these PDFs print out fine.
<hr>

<table border="1">
<tbody>

<tr>
<td>
<p>
<a href="http://www.msu.edu/~huntharo/xwin/docs/ddx.pdf">
Definition of the Porting Layer for the X V11 Sample Server</a> (179kB, 69 pages)
</p>
1994 - Covers up to X11R6; essential
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.digital.com/DTJL03/DTJL03PF.PDF">
Design of eXcursion Version 2 for Windows, Windows NT, and Windows 95</a> (301kB, 14 pages)
</p>
1996 - Essential
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.msu.edu/~huntharo/xwin/docs/strat.pdf">
Strategies for Porting the X V11 Sample Server</a> (77kB, 22 pages)
</p>
1988 - Might give you some insight
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.msu.edu/~huntharo/xwin/docs/gdz.pdf">
Godzilla's Guide to Porting the X V11 Sample Server</a> (38kB, 11 pages)
</p>
1990 - Old and thin, but relevant
</td>
</tr>

<tr>
<td>
<p>
<a href="http://tru64unix.compaq.com/faqs/publications/dev_doc/DOCUMENTATION/PDF/xikdoc.pdf">
Writing a Graphics Device Driver and DDX for the Digital UNIX X Server</a> (602kB, 272 pages)
</p>
1997 - Contains some good hints in the DDX section
</td>
</tr>

</tbody>
</table>


<p></p>

<hr>
Online versions of X Window System manuals.
These contain roughly the same information as
the books, but these are free :)
Some of the PDFs have graphics that appear out
of place when viewing them; most of them appear to
print out okay.
<hr>

<table border="1">
<tbody>

<tr>
<td>
<p>
<a href="http://tru64unix.compaq.com/faqs/publications/base_doc/DOCUMENTATION/V51_PDF_ACRO_SUP/XWINSYS.PDF">
X Window System - The Complete Reference to Xlib, X Protocol, ICCCM, and XFLD for X11R4</a> (1M PDF, 711 pages)
</p>
1992 - Original (online) X Window System book
</td>
</tr>

<tr>
<td>
<p>
<a href="http://tru64unix.compaq.com/faqs/publications/base_doc/DOCUMENTATION/V51_PDF_ACRO_SUP/XLIB.PDF">
Xlib - C Language X Interface - X11R6</a> (1M PDF, 516 pages)
</p>
</td>
</tr>

<tr>
<td>
<a href="http://tru64unix.compaq.com/faqs/publications/base_doc/DOCUMENTATION/V51_PDF_ACRO_SUP/PROTO.PDF">
X Protocol - X11R6</a> (327kB PDF, 176 pages)
</td>
</tr>

<tr>
<td>
<a href="http://tru64unix.compaq.com/faqs/publications/base_doc/DOCUMENTATION/V51_PDF_ACRO_SUP/XLFD.PDF">
X Logical Font Description Conventions - X11R6</a> (67kB PDF, 37 pages)
</td>
</tr>

<tr>
<td>
<a href="http://tru64unix.compaq.com/faqs/publications/base_doc/DOCUMENTATION/V51_PDF_ACRO_SUP/ICCCM.PDF">
X Inter-Client Communication Conventions - X11R6</a> (168kb PDF, 73 pages)
</td>
</tr>

</tbody>
</table>

<p></p>

<hr>
Print versions of X Window System manuals.
All books listed below are in print and
available at amazon.com through the provided
links.
<hr>

<table border="1">
<tbody>

<tr>
<td>
<p>
<a href="http://www.amazon.com/exec/obidos/ASIN/1555580882/">
X Window System - The Complete Reference to Xlib, X Protocol, ICCCM, and XFLD for X11R5</a> (Paperback, 1000 pages)
</p>
1992 - $59.95 - Original X Window System book
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.amazon.com/exec/obidos/ASIN/1555581544/">
X Window System - Core Libraries and Standards - X11R6.1</a> (Paperback, 700 pages)
</p>
Covers Xlib, ICCCM, and XLFD
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.amazon.com/exec/obidos/ASIN/155558148X/">
X Window System - Core and Extension Protocols - X11R6.1</a> (Paperback, 700 pages)
</p>
1997 - $69.95 - Part 2 of 3 replacing original X Window System book
</td>
</tr>

<tr>
<td>
<p>
<a href="http://www.amazon.com/exec/obidos/ASIN/1555581463/">
X Window System - Extension Libraries - X11R6.1</a> (Paperback, 400 pages)
</p>
1997 - $59.95 - Part 3 of 3 replacing original X Window System book
</td>
</tr>

</tbody>
</table>

<p>
Thank you for your interest in the project,

<p>
Harold L Hunt II

</body>
</html>