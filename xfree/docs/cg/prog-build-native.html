<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Native Compiling</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"/><LINK
REL="HOME"
TITLE="Cygwin/X Contributor's Guide"
HREF="cygwin-x-cg.html"/><LINK
REL="UP"
TITLE="Programming"
HREF="programming.html"/><LINK
REL="PREVIOUS"
TITLE="Obtaining the Source Code"
HREF="prog-obtaining-source.html"/><LINK
REL="NEXT"
TITLE="Cross Compiling"
HREF="prog-build-cross.html"/></HEAD
><BODY
CLASS="sect1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin/X Contributor's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="prog-obtaining-source.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Programming</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="prog-build-cross.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"/></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="prog-build-native"
>Native Compiling</A
></H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling"
>Compiling the Source Code</A
></H2
><P
>Compiling Cygwin/X doesn't have to be hard, although the
X Window System source code tree is reasonably large.  There are a
few simple techniques that make building the source code, keeping the
source code up to date, and keeping the source code organized much
easier.</P
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="prog-compiling-required-packages"
>Required Packages for Compiling</A
></H3
><P
>Many developer libraries and developer tools are required to
build Cygwin/X.  Several packages are required in addition to the
default packages installed by the Cygwin installer.  Following is a
list of additional packages that are required to compile Cygwin/X
natively in Cygwin.  Note that some of these packages are meta
packages that will automatically cause several other packages to be
selected for installation; do not unselect any of these automatically
selected packages.</P
><UL
><LI
><P
>autoconf</P
></LI
><LI
><P
>automake</P
></LI
><LI
><P
>binutils</P
></LI
><LI
><P
>bzip2</P
></LI
><LI
><P
>diffutils</P
></LI
><LI
><P
>fileutils</P
></LI
><LI
><P
>findutils</P
></LI
><LI
><P
>flex</P
></LI
><LI
><P
>gawk</P
></LI
><LI
><P
>gcc</P
></LI
><LI
><P
>git</P
></LI
><LI
><P
>make</P
></LI
><LI
><P
>patch</P
></LI
><LI
><P
>sed</P
></LI
><LI
><P
>tar</P
></LI
><LI
><P
>zlib</P
></LI
></UL
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="prog-compiling-standard"
>Standard Build</A
></H3
><P
>Follow these steps to create a standard, non-debug,
build:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your X Window System development
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~
$ cd x-devel

Username@CygwinHost ~/xserver
$ ./configure --prefix=/usr
[lots of output]
$ make
[lots more output]

</PRE
></TD
></TR
></TABLE
><P
>Standard build is now complete.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>
The unpacked source occupies approximately 80MB of disk space.
Building the source requires approximately an additional 160MB.
On my ageing 2.2MHz Athlon64 3500+, the build takes about 20 minutes.
</P
><P
>XXX: Describe configure option for specifying a builddir</P
></BLOCKQUOTE
></DIV
></LI
></OL
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="prog-compiling-debug"
>Debug Build</A
></H3
><P
>Follow these steps to create a build with debugging
information:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your X Window System development
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~
$ cd x-devel

Username@CygwinHost ~/xserver
$ ./configure --prefix=/usr --enable-debug CFLAGS="-g -O0"
[lots of output]
$ make
[lots more 
</PRE
></TD
></TR
></TABLE
><P
>Debug build is now complete.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling-executing"
>Running a local build</A
></H2
><P
>Follow these steps to run the built X server:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your X Window System development
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~
$ cd xserver
Username@CygwinHost ~/xserver
$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Invoke the hw/xwin/Xwin executable:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~/xserver
$ hw/xwin/XWin
</PRE
></TD
></TR
></TABLE
><P
>The X server you have built will now attempt to run.</P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling-install"
>Installing a local build</A
></H2
><P
>Installing a local build enables you to verify that a build of
the entire source tree is operational.  It is wise to verify the
operation of full builds of the source tree from time to time, as full
builds will occasionally be broken by changes that other developers
are making to the X Window System source code tree.</P
><P
>Installing a local build on top of an existing build is not a
good idea, as this can mask problems that occurred during the build
process, or it can cause problems that are unrelated to the build
process; either situation is undesirable.  It is generally a good
idea to move your old installation out of the way before installing a
local build, and these instructions will assume that you desire to do
so.  Follow the instructions below to install a local build:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your desired X Window System build
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~
$ cd ~/xserver/build/<TT
CLASS="replaceable"
><I
>build-prefix</I
></TT
>

Username@CygwinHost ~/xserver/build/<TT
CLASS="replaceable"
><I
>build-prefix</I
></TT
>
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Make the <KBD
CLASS="userinput"
>install</KBD
> target, which installs
everything:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Username@CygwinHost ~/xserver/build/<TT
CLASS="replaceable"
><I
>build-prefix</I
></TT
>
$ make install

Username@CygwinHost ~/xserver/build/<TT
CLASS="replaceable"
><I
>build-prefix</I
></TT
>
$ 
</PRE
></TD
></TR
></TABLE
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-tree-update"
>Keeping your source code tree updated</A
></H2
><P
><A
HREF="glossary.html#gloss-git"
><I
CLASS="glossterm"
>git</I
></A
> makes keeping
your source code tree up to date easy.  Consult the git documentation
for details.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"/><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="prog-obtaining-source.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-x-cg.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="prog-build-cross.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Obtaining the Source Code</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programming.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Cross Compiling</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>