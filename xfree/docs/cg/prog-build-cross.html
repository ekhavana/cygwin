<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Cross Compiling</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.61
"/><LINK
REL="HOME"
TITLE="Cygwin/XFree86 Contributor's Guide"
HREF="cygwin-xfree-cg.html"/><LINK
REL="UP"
TITLE="Programming"
HREF="programming.html"/><LINK
REL="PREVIOUS"
TITLE="Native Compiling"
HREF="prog-build-native.html"/><LINK
REL="NEXT"
TITLE="Documentation"
HREF="documentation.html"/></HEAD
><BODY
CLASS="sect1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin/XFree86 Contributor's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="prog-build-native.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Programming</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="documentation.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"/></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="prog-build-cross"
>Cross Compiling</A
></H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-cross-obtaining-compiler-source"
>Obtaining binutils and gcc Source</A
></H2
><P
>binutils and gcc source code releases that are known to
compile on Cygwin and distributed by the Cygwin project.
Therefore, it is highly recommended that you obtain the binutils and
gcc sources from the <A
HREF="http://cygwin.com/mirrors.html"
TARGET="_top"
>Cygwin
mirror network</A
>.</P
><P
>Follow these steps to download Cygwin/XFree86 binaries:</P
><OL
TYPE="1"
><LI
><P
>Create a directory to store the binutils and gcc sources in,
such as <TT
CLASS="filename"
>/cygwin/src/</TT
></P
></LI
><LI
><P
>Visit the <A
HREF="http://cygwin.com/mirrors.html"
TARGET="_top"
>Cygwin mirrors
page</A
> to find your closest mirror</P
></LI
><LI
><P
>The ftp url for your mirror site should take you to the
<TT
CLASS="filename"
>cygwin/</TT
>
directory on the mirror</P
></LI
><LI
><P
>Download the following files from <TT
CLASS="filename"
>cygwin/</TT
>, saving them to
<TT
CLASS="filename"
>/cygwin/src/</TT
> The
compressed file size appears after each file in the list below.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Downloading with a Web Browser: </B
>
Some web browsers automatically decompress saved files when you use
the <SPAN
CLASS="mousebutton"
>left</SPAN
> mouse button to follow the link to
a file; <SPAN
CLASS="application"
>bunzip2</SPAN
> will report, <SPAN
CLASS="QUOTE"
>"Data
integrity error when decompressing."</SPAN
>, when attempting to
decompress a file that has been decompressed by your web browser.
Prevent your files from being automatically decompressed by clicking
the <SPAN
CLASS="mousebutton"
>right</SPAN
> mouse button on a file link and
choosing a command such as <SPAN
CLASS="guimenuitem"
>Save Target
As...</SPAN
> or <SPAN
CLASS="guimenuitem"
>Save Link As...</SPAN
> from
the context sensitive menu.  Better yet, download your files with a
stand alone ftp client.
</P
></BLOCKQUOTE
></DIV
><UL
><LI
><P
><TT
CLASS="filename"
>binutils/binutils-20010425-2-src.tar.gz</TT
>
(9.1 MB; required, necessary to build gcc and
Cygwin/XFree86)</P
></LI
><LI
><P
><TT
CLASS="filename"
>gcc/gcc-2.95.3-5-src.tar.bz2</TT
>
(8.1 MB; required, necessary to build
Cygwin/XFree86)</P
></LI
></UL
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-cross-obtaining-cygwin-headers-and-libs"
>Obtaining Cygwin Headers and Libs</A
></H2
><P
>The simplest method of building a cross compiler for Cygwin
requires that you have the Cygwin headers and libraries available at
the time of building the cross compiler.  Cygwin headers and
libraries are installed when Cygwin is installed, so the headers and
libraries can be obtained from an existing Cygwin
installation.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Don't simply copy the headers and libraries: </B
>Some of the headers and libraries are symbolic links to other
headers or libraries.  Copying these files using a program that is not
aware of Cygwin's symlink emulation will result in some of the
header and library files being broken.  The method described below
will preserve the symbolic links used by the header and library
files.</P
></BLOCKQUOTE
></DIV
><OL
TYPE="1"
><LI
><P
>Launch your Cygwin environment, using either the icon on your
Desktop, the icon in your Start Menu, or by running cygwin.bat from
your Cygwin directory (e.g. <TT
CLASS="filename"
>c:\cygwin</TT
>); you should see a window like
the following:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to Cygwin root directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ cd /

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create an archive of the contents of the <TT
CLASS="filename"
>/lib</TT
> directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /
$ tar -czf cygwin-lib.tgz lib/

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to the <TT
CLASS="filename"
>usr</TT
> directory in your Cygwin root
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /
$ cd /usr

Harold@MyWindowsHost /usr
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create an archive of the contents of the <TT
CLASS="filename"
>/usr/include</TT
> directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /usr
$ tar -czf cygwin-include.tgz include/

Harold@MyWindowsHost /usr
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Transfer cygwin-lib.tgz and cygwin-include.tgz to
your build host using any method that you have available (e.g. ftp,
samba, diskette, etc.).  Save the files in the <TT
CLASS="filename"
>/cygwin/i686-pc-cygwin/</TT
> directory.</P
></LI
><LI
><P
>Open a shell on your cross compiling build host; you should see
a window like the following:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost harold]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to the <TT
CLASS="filename"
>/cygwin/i686-pc-cygwin/</TT
> directory in
your build host root directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost harold]$ cd /cygwin/i686-pc-cygwin/
[harold@MyCrossHost /cygwin/i686-pc-cygwin/]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Extract the cygwin-lib.tgz and cygwin-include.tgz
archives:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost /cygwin/i686-pc-cygwin/]$ tar -xzf cygwin-lib.tgz
[harold@MyCrossHost /cygwin/i686-pc-cygwin/]$ tar -xzf cygwin-include.tgz
</PRE
></TD
></TR
></TABLE
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-cross-building-binutils-and-gcc"
>Building binutils and gcc</A
></H2
><OL
TYPE="1"
><LI
><P
>Open a shell on your cross compiling build host; you should see
a window like the following:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost harold]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to the <TT
CLASS="filename"
>/cygwin/src/</TT
> directory in
your build host root directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost harold]$ cd /cygwin/src/
[harold@MyCrossHost src]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Extract the binutils-20010425-2-src.tar.gz and gcc-2.95.3-5-src.tar.bz2
archives:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost src]$ tar -xzf binutils-20010425-2-src.tar.gz
[harold@MyCrossHost src]$ bunzip2 gcc-2.95.3-5-src.tar.bz2
[harold@MyCrossHost src]$ tar -xf gcc-2.95.3-5-src.tar
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to the <TT
CLASS="filename"
>/cygwin/src/binutils-20010425-2</TT
>
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost src]$ cd /cygwin/src/binutils-20010425-2
[harold@MyCrossHost binutils-20010425-2]$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create a <TT
CLASS="filename"
>build</TT
> directory
and change the current directory to that directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost binutils-20010425-2]$ mkdir build
[harold@MyCrossHost binutils-20010425-2]$ cd build
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Configure binutils:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ ../configure --prefix=/cygwin --exec-prefix=/cygwin 
--target=i686-pc-cygwin --host=i686-pc-linux &gt; configure.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Build binutils:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ make all &gt; all.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Install binutils:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ make install &gt; install.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Modify the <TT
CLASS="envar"
>PATH</TT
> environment variable to include
the directories that the binutils executables were installed in:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ PATH=$PATH:/cygwin/bin:/cygwin/i686-pc-cygwin/bin
[harold@MyCrossHost build]$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to the <TT
CLASS="filename"
>/cygwin/src/binutils-20010425-2</TT
>
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost src]$ cd /cygwin/src/gcc-2.95.3-5
[harold@MyCrossHost gcc-2.95.3-5]$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create a <TT
CLASS="filename"
>build</TT
> directory
and change the current directory to that directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost gcc-2.95.3-5]$ mkdir build
[harold@MyCrossHost gcc-2.95.3-5]$ cd build
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Configure gcc:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ ../configure --prefix=/cygwin --exec-prefix=/cygwin 
--target=i686-pc-cygwin --host=i686-pc-linux 
--enable-haifa &gt; configure.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Build gcc:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ make all &gt; all.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Install gcc:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;[harold@MyCrossHost build]$ make install &gt; install.log 2&gt;&amp;1
[harold@MyCrossHost build]$
</PRE
></TD
></TR
></TABLE
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-cross-build"
>Building Cygwin/XFree86</A
></H2
><P
>Download <A
HREF="http://www.msu.edu/~huntharo/xwin/host.def"
TARGET="_top"
>host.def</A
>, and
place the file in <TT
CLASS="filename"
>xc/config/cf</TT
>.</P
><P
>Modify host.def/PostIncDir to reflect the actual version of gcc
compiled, such as #define PostIncDir
/cygwin/lib/gcc-lib/i686-pc-cygwin/2.95.3-5/include.  The version
number in the path will change depending on which version of gcc you
built and installed.</P
><P
>make World BOOTSTRAPCFLAGS="-D__CYGWIN__ -Ulinux -DCrossCompiling=1" IMAKE_DEFINES="-D__CYGWIN__ -Ulinux" &gt; World.log 2&gt;&amp;1</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"/><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="prog-build-native.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-xfree-cg.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="documentation.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Native Compiling</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programming.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Documentation</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>