<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Compiling the Source Code</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.61
"/><LINK
REL="HOME"
TITLE="Cygwin/XFree86 Contributor's Guide"
HREF="cygwin-xfree-cg.html"/><LINK
REL="UP"
TITLE="Programming"
HREF="programming.html"/><LINK
REL="PREVIOUS"
TITLE="Obtaining the Source Code"
HREF="prog-source-obtaining.html"/><LINK
REL="NEXT"
TITLE="Installing a local build"
HREF="prog-compiling-install.html"/></HEAD
><BODY
CLASS="sect1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Cygwin/XFree86 Contributor's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="prog-source-obtaining.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Programming</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="prog-compiling-install.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"/></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="prog-compiling"
>Compiling the Source Code</A
></H1
><P
>Compiling Cygwin/XFree86 doesn't have to be hard, although the
XFree86 source code tree contains over 250 MB of data.  There are a
few simple techniques that make building the source code, keeping the
source code up to date, and keeping the source code organized much
easier.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling-"
>Compiling Overview</A
></H2
><P
>Compiling the XFree86 source code tree is a lot easier when you
keep your builds in directories seperate from the source code
directory.  Keeping the source code and builds in seperate directories
allows you to have many builds for different configurations, allows
you to easily delete a build, and keeps the source code tree clean and
manageable.</P
><P
>A small utility, <TT
CLASS="filename"
>lndir.exe</TT
>, is needed to
keep your builds directories sepereate from your source directory;
<TT
CLASS="filename"
>lndir.exe</TT
> works just like the standard
<B
CLASS="command"
>ln</B
> on <SPAN
CLASS="acronym"
>UNIX</SPAN
>, but <TT
CLASS="filename"
>lndir.exe</TT
>
creates links recursively for all files and directories in the
specified directory.  The <TT
CLASS="filename"
>lndir.exe</TT
> utility is
included with the XFree86 source code tree; but the catch is that you
need to build the tree before you get
<TT
CLASS="filename"
>lndir.exe</TT
>.  <TT
CLASS="filename"
>lndir.exe</TT
>
has been compiled and is available at <A
HREF="http://www.msu.edu/~huntharo/xwin/lndir.exe.bz2"
TARGET="_top"
>http://www.msu.edu/~huntharo/xwin/lndir.exe.bz2</A
>
(8 kB).  Download the file, saving it to your Cygwin
root directory (e.g. <TT
CLASS="filename"
>c:\cygwin</TT
>), then follow the simple
instructions below to install the utility:</P
><OL
TYPE="1"
><LI
><P
>Launch a Cygwin <B
CLASS="command"
>bash</B
> prompt.  You should
see a screen similar to the following:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change to your Cygwin root directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ cd /

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Uncompress lndir.exe.bz2:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /
$ bunzip2 lndir.exe.bz2

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Copy lndir.exe to <TT
CLASS="filename"
>/bin</TT
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /
$ cp lndir.exe /bin

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Verify that <B
CLASS="command"
>lndir</B
> is working:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost /
$ lndir
usage: lndir.exe [-silent] [-ignorelinks] fromdir [todir]

Harold@MyWindowsHost /
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>The <B
CLASS="command"
>lndir</B
> utility is now installed.</P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling-standard"
>Standard Build</A
></H2
><P
>Follow these steps to create a standard, non-debug,
build:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your XFree86 development
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ cd x-devel

Harold@MyWindowsHost ~/x-devel
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create a directory to house your builds, <TT
CLASS="filename"
>~/x-devel/build</TT
> is
recommended:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel
$ mkdir build

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to your build directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel
$ cd build

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create a directory for your standard build, <TT
CLASS="filename"
>std</TT
> is recommended:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build
$ mkdir std

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to your standard build
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build
$ cd std

Harold@MyWindowsHost ~/x-devel/build/std
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create symlinks to your source tree, using
<B
CLASS="command"
>lndir</B
>, in your standard build directory:</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>As of 2001-06-12, creating symlinks to the source tree creates
11,664 files in 1,510 folders, which is only 2.24 MB of data, but
requires 45.5 MB of storage space on a file system using 4 KB
allocation units.</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build/std
$ lndir ../../xc/
../../xc/config:
../../../xc/config/cf:

...

Harold@MyWindowsHost ~/x-devel/build/std
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Run a standard build of the entire tree, which takes between 30
minutes and 5 hours, saving the output of the build commands to
<TT
CLASS="filename"
>World.log</TT
>:</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>As of 2001-06-12, a standard build of the entire tree requires
255.5 MB of storage space on a file system using 4 KB allocation
units; that is in addition to the 45.5 MB of previously generated
symlinks.</P
><P
>As a benchmark, a standard build runs for 71 minutes on a
machine with a 1.2 GHz Atlhon, 256 MB DDR RAM, and a 7200 RPM ATA/100
HD.</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build/std
$ make World &gt; World.log 2&gt;&amp;1

Harold@MyWindowsHost ~/x-devel/build/std
$ 
</PRE
></TD
></TR
></TABLE
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="prog-compiling-debug"
>Debug Build</A
></H2
><P
>Follow these steps to create a build with debugging
information:</P
><OL
TYPE="1"
><LI
><P
>Change the current directory to your XFree86 development
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~
$ cd x-devel

Harold@MyWindowsHost ~/x-devel
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>If you have not already done so, create a directory to house
your builds, <TT
CLASS="filename"
>~/x-devel/build</TT
> is
recommended:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel
$ mkdir build

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to your build directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel
$ cd build

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create a directory for your debug build, <TT
CLASS="filename"
>debug</TT
> is recommended:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build
$ mkdir debug

Harold@MyWindowsHost ~/x-devel/build
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the current directory to your debug build
directory:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build
$ cd debug

Harold@MyWindowsHost ~/x-devel/build/debug
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Create links to your source tree, using
<B
CLASS="command"
>lndir</B
>, in your standard build directory:</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>As of 2001-06-12, creating symlinks to the source tree creates
11,664 files in 1,510 folders, which is only 2.24 MB of data, but
requires 45.5 MB of storage space on a file system using 4 KB
allocation units.</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build/debug
$ lndir ../../xc/
../../xc/config:
../../../xc/config/cf:

...

Harold@MyWindowsHost ~/x-devel/build/debug
$ 
</PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>Run a debug build of the entire tree, which takes between 30 minutes
and 5 hours, saving the output of the build commands to
<TT
CLASS="filename"
>World.log</TT
>:</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>As of 2001-06-12, a debug build of the entire tree requires
566.5 MB of storage space on a file system using 4 KB allocation
units; that is in addition to the 45.5 MB of previously generated
symlinks.</P
><P
>As a benchmark, a debug build runs for 71 minutes on a machine
with a 1.2 GHz Atlhon, 256 MB DDR RAM, and a 7200 RPM ATA/100
HD.  You may have noticed that the standard build time and the debug
build time are identical.</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;Harold@MyWindowsHost ~/x-devel/build/debug
$ ./config/util/makeg.sh World &gt; World.log 2&gt;&amp;1

Harold@MyWindowsHost ~/x-devel/build/debug
$ 
</PRE
></TD
></TR
></TABLE
></LI
></OL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"/><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="prog-source-obtaining.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cygwin-xfree-cg.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="prog-compiling-install.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Obtaining the Source Code</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programming.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Installing a local build</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>