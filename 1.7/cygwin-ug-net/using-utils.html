<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968"><title>Cygwin Utilities</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.71.1"><link rel="start" href="cygwin-ug-net.html" title="Cygwin User's Guide"><link rel="up" href="using.html" title="Chapter&#160;3.&#160;Using Cygwin"><link rel="prev" href="using-cygserver.html" title="Cygserver"><link rel="next" href="using-effectively.html" title="Using Cygwin effectively with Windows"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Cygwin Utilities</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-cygserver.html">Prev</a>&#160;</td><th width="60%" align="center">Chapter&#160;3.&#160;Using Cygwin</th><td width="20%" align="right">&#160;<a accesskey="n" href="using-effectively.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-utils"></a>Cygwin Utilities</h2></div></div></div><p>Cygwin comes with a number of command-line utilities that are
used to manage the UNIX emulation portion of the Cygwin environment.
While many of these reflect their UNIX counterparts, each was written
specifically for Cygwin.  You may use the long or short option names 
interchangeably; for example, <code class="literal">--help</code> and 
<code class="literal">-h</code> function identically. All of the Cygwin 
command-line utilities support the <code class="literal">--help</code> and
<code class="literal">--version</code> options. 
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cygcheck"></a>cygcheck</h3></div></div></div><pre class="screen">
Usage: cygcheck PROGRAM [ -v ] [ -h ]
       cygcheck -c [ PACKAGE ... ] [ -d ]
       cygcheck -s [ -r ] [ -v ] [ -h ]
       cygcheck -k
       cygcheck -f FILE [ FILE ... ]
       cygcheck -l [ PACKAGE ... ]
       cygcheck -p REGEXP
List system information, check installed packages, or query package database.

At least one command option or a PROGRAM is required, as shown above.

  PROGRAM              list library (DLL) dependencies of PROGRAM
  -c, --check-setup    show installed version of PACKAGE and verify integrity
                       (or for all installed packages if none specified)
  -d, --dump-only      just list packages, do not verify (with -c)
  -s, --sysinfo        produce diagnostic system information (implies -c -d)
  -r, --registry       also scan registry for Cygwin settings (with -s)
  -k, --keycheck       perform a keyboard check session (must be run from a
                       plain console only, not from a pty/rxvt/xterm)
  -f, --find-package   find the package that FILE belongs to
  -l, --list-package   list contents of PACKAGE (or all packages if none given)
  -p, --package-query  search for REGEXP in the entire cygwin.com package
                       repository (requies internet connectivity)
  -v, --verbose        produce more verbose output
  -h, --help           annotate output with explanatory comments when given
                       with another command, otherwise print this help
  -V, --version        print the version of cygcheck and exit

Note: -c, -f, and -l only report on packages that are currently installed. To
  search all official Cygwin packages use -p instead.  The -p REGEXP matches
  package names, descriptions, and names of files/paths within all packages.
</pre><p>
The <span><strong class="command">cygcheck</strong></span> program is a diagnostic utility for
dealing with Cygwin programs. If you are familiar with
<span><strong class="command">dpkg</strong></span> or <span><strong class="command">rpm</strong></span>,
<span><strong class="command">cygcheck</strong></span> is similar in many ways. (The major difference
is that <span><strong class="command">setup.exe</strong></span> handles installing and uninstalling
packages; see <a href="setup-net.html#internet-setup" title="Internet Setup">the section called &#8220;Internet Setup&#8221;</a> for more information.)
</p><p>
The <code class="literal">-c</code> option checks the version and status of 
installed Cygwin packages. If you specify one or more package names,
<span><strong class="command">cygcheck</strong></span> will limit its output to those packages,
or with no arguments it lists all packages. A package will be marked
<code class="literal">Incomplete</code> if files originally installed are no longer
present. The best thing to do in that situation is reinstall the package
with <span><strong class="command">setup.exe</strong></span>. To see which files are missing, use the
<code class="literal">-v</code> option. If you do not need to know the status
of each package and want <span><strong class="command">cygcheck</strong></span> to run faster, add the
<code class="literal">-d</code> option and <span><strong class="command">cygcheck</strong></span> will only
output the name and version for each package.
</p><p>
If you list one or more programs on the command line,
<span><strong class="command">cygcheck</strong></span> will diagnose the runtime environment of that
program or programs, providing the names of DLL files on which the program
depends.  If you specify the <code class="literal">-s</code> option,
<span><strong class="command">cygcheck</strong></span> will give general system information.  If you
list one or more programs on the command line and specify
<code class="literal">-s</code>, <span><strong class="command">cygcheck</strong></span> will report on
both.</p><p>
The <code class="literal">-f</code> option helps you to track down which package a
file came from, and <code class="literal">-l</code> lists all files in a package.
For example, to find out about <code class="filename">/usr/bin/less</code> and its
package:
</p><div class="example"><a name="utils-cygcheck-ex"></a><p class="title"><b>Example&#160;3.4.&#160;Example <span>cygcheck</span> usage</b></p><div class="example-contents"><pre class="screen">
$ cygcheck -f /usr/bin/less
less-381-1

$ cygcheck -l less
/usr/bin/less.exe
/usr/bin/lessecho.exe
/usr/bin/lesskey.exe
/usr/man/man1/less.1
/usr/man/man1/lesskey.1
</pre></div></div><p><br class="example-break">
</p><p>The <code class="literal">-h</code> option prints additional helpful
messages in the report, at the beginning of each section.  It also
adds table column headings.  While this is useful information, it also
adds some to the size of the report, so if you want a compact report
or if you know what everything is already, just leave this out.</p><p>The <code class="literal">-v</code> option causes the output to be more
verbose.  What this means is that additional information will be
reported which is usually not interesting, such as the internal
version numbers of DLLs, additional information about recursive DLL
usage, and if a file in one directory in the PATH also occurs in other
directories on the PATH.  </p><p>The <code class="literal">-r</code> option causes
<span><strong class="command">cygcheck</strong></span> to search your registry for information
that is relevent to Cygwin programs.  These registry entries are the
ones that have "Cygwin" in the name.  If you are paranoid about
privacy, you may remove information from this report, but please keep
in mind that doing so makes it harder to diagnose your problems.</p><p>In contrast to the other options that search the packages that are
installed on your local system, the <code class="literal">-p</code> option can be used
to search the entire official Cygwin package repository.  It takes as argument
a Perl-compatible regular expression which is used to match package names, 
package descriptions, and path/filenames of the contents of packages.  This
feature requires an active internet connection, since it must query the
<code class="literal">cygwin.com</code> web site.  In fact, it is equalivant to the
search that is available on the <a href="http://cygwin.com/packages/" target="_top">Cygwin
package listing</a> page.</p><p>For example, perhaps you are getting an error because you are missing a
certain DLL and you want to know which package includes that file:
</p><div class="example"><a name="utils-search-ex"></a><p class="title"><b>Example&#160;3.5.&#160;Searching all packages for a file</b></p><div class="example-contents"><pre class="screen">
$ cygcheck -p 'cygintl-2\.dll'
Found 1 matches for 'cygintl-2\.dll'.

libintl2-0.12.1-3         GNU Internationalization runtime library

$ cygcheck -p 'libexpat.*\.a'
Found 2 matches for 'libexpat.*\.a'.

expat-1.95.7-1            XML parser library written in C
expat-1.95.8-1            XML parser library written in C

$ cygcheck -p '/ls\.exe'
Found 2 matches for '/ls\.exe'.

coreutils-5.2.1-5         GNU core utilities (includes fileutils, sh-utils and textutils)
coreutils-5.3.0-6         GNU core utilities (includes fileutils, sh-utils and textutils)
</pre></div></div><p><br class="example-break">
</p><p>Note that this option takes a regular expression, not a glob or wildcard.
This means that you need to use <code class="literal">.*</code> if you want something
similar to the wildcard <code class="literal">*</code> commonly used in filename globbing.
Similarly, to match the period character you should use <code class="literal">\.</code>
since the <code class="literal">.</code> character in a regexp is a metacharacter that
will match any character.  Also be aware that the characters such as 
<code class="literal">\</code> and <code class="literal">*</code> are shell metacharacters, so 
they must be either escaped or quoted, as in the example above.</p><p>The third example above illustrates that if you want to match a whole 
filename, you should include the <code class="literal">/</code> path seperator.  In the
given example this ensures that filenames that happen to end in
<code class="literal">ls.exe</code> such as <code class="literal">ncftpls.exe</code> are not shown.
Note that this use does not mean "look for packages with <code class="literal">ls</code>
in the root directory," since the <code class="literal">/</code> can match anywhere in the
path.  It's just there to anchor the match so that it matches a full
filename.</p><p>By default the matching is case-sensitive.  To get a case insensitive
match, begin your regexp with <code class="literal">(?i)</code> which is a PCRE-specific
feature.  For complete documentation on Perl-compatible regular expression
syntax and options, read the <span><strong class="command">perlre</strong></span> manpage, or one of many
websites such as <code class="literal">perldoc.com</code> that document the Perl
language.</p><p>The <span><strong class="command">cygcheck</strong></span> program should be used to send
information about your system for troubleshooting when requested.  
When asked to run this command save the output so that you can email it,
for example:</p><pre class="screen">
<code class="prompt">C:\cygwin&gt;</code> <strong class="userinput"><code>cygcheck -s -v -r -h &gt; cygcheck_output.txt</code></strong>
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cygpath"></a>cygpath</h3></div></div></div><pre class="screen">
Usage: cygpath (-d|-m|-u|-w|-t TYPE) [-f FILE] [OPTION]... NAME...
       cygpath [-c HANDLE] 
       cygpath [-ADHOPSW] 
       cygpath [-F ID] 
Convert Unix and Windows format paths, or output system path information

Output type options:
  -d, --dos             print DOS (short) form of NAMEs (C:\PROGRA~1\)
  -m, --mixed           like --windows, but with regular slashes (C:/WINNT)
  -M, --mode            report on mode of file (currently binmode or textmode)
  -u, --unix            (default) print Unix form of NAMEs (/cygdrive/c/winnt)
  -w, --windows         print Windows form of NAMEs (C:\WINNT)
  -t, --type TYPE       print TYPE form: 'dos', 'mixed', 'unix', or 'windows'
Path conversion options:
  -a, --absolute        output absolute path
  -l, --long-name       print Windows long form of NAMEs (with -w, -m only)
  -p, --path            NAME is a PATH list (i.e., '/bin:/usr/bin')
  -s, --short-name      print DOS (short) form of NAMEs (with -w, -m only)
System information:
  -A, --allusers        use `All Users' instead of current user for -D, -P
  -D, --desktop         output `Desktop' directory and exit
  -H, --homeroot        output `Profiles' directory (home root) and exit
  -O, --mydocs          output `My Documents' directory and exit
  -P, --smprograms      output Start Menu `Programs' directory and exit
  -S, --sysdir          output system directory and exit
  -W, --windir          output `Windows' directory and exit
  -F, --folder ID       output special folder with numeric ID and exit
Other options:
  -f, --file FILE       read FILE for input; use - to read from STDIN
  -o, --option          read options from FILE as well (for use with --file)
  -c, --close HANDLE    close HANDLE (for use in captured process)
  -i, --ignore          ignore missing argument
  -h, --help            output usage information and exit
  -v, --version         output version information and exit
</pre><p>The <span><strong class="command">cygpath</strong></span> program is a utility that
converts Windows native filenames to Cygwin POSIX-style pathnames and
vice versa.  It can be used when a Cygwin program needs to pass a file 
name to a native Windows program, or expects to get a file name from a
native Windows program.  Alternatively, <span><strong class="command">cygpath</strong></span> can 
output information about the location of important system directories 
in either format.  
</p><p>The <code class="literal">-u</code> and <code class="literal">-w</code> options
indicate whether you want a conversion to UNIX (POSIX) format 
(<code class="literal">-u</code>) or to Windows format (<code class="literal">-w</code>).  
Use the <code class="literal">-d</code> to get DOS-style (8.3) file and path names.
The <code class="literal">-m</code> option will output Windows-style format
but with forward slashes instead of backslashes.  This option is 
especially useful in shell scripts, which use backslashes as an escape 
character.</p><p> In combination with the <code class="literal">-w</code> option, you can use
the <code class="literal">-l</code> and <code class="literal">-s</code> options to use normal
(long) or DOS-style (short) form. The <code class="literal">-d</code> option is 
identical to <code class="literal">-w</code> and <code class="literal">-s</code> together.
</p><p>The <code class="literal">-p</code> option means that you want to convert
a path-style string rather than a single filename.  For example, the
PATH environment variable is semicolon-delimited in Windows, but
colon-delimited in UNIX.  By giving <code class="literal">-p</code> you are
instructing <span><strong class="command">cygpath</strong></span> to convert between these
formats.</p><p>The <code class="literal">-i</code> option supresses the print out of the
usage message if no filename argument was given.  It can be used in
make file rules converting variables that may be omitted
to a proper format.  Note that <span><strong class="command">cygpath</strong></span> output may 
contain spaces (C:\Program Files) so should be enclosed in quotes.
</p><div class="example"><a name="utils-cygpath-ex"></a><p class="title"><b>Example&#160;3.6.&#160;Example <span>cygpath</span> usage</b></p><div class="example-contents"><pre class="screen">

#!/bin/sh
if [ "${1}" = "" ];
	then
		XPATH=".";
	else
		XPATH="$(cygpath -w "${1}")";
fi
explorer $XPATH &amp;

</pre></div></div><br class="example-break"><p>The capital options 
<code class="literal">-D</code>, <code class="literal">-H</code>, <code class="literal">-P</code>, 
<code class="literal">-S</code>, and <code class="literal">-W</code> output directories used 
by Windows that are not the same on all systems, for example 
<code class="literal">-S</code> might output C:\WINNT\system32 or C:\Windows\System32. 
The <code class="literal">-H</code> shows the Windows profiles directory that can 
be used as root of home.  The <code class="literal">-A</code> option forces use of 
the "All Users" directories instead of the current user for the 
<code class="literal">-D</code>, <code class="literal">-O</code> and <code class="literal">-P</code> 
options.
The <code class="literal">-F</code> outputs other special folders specified by
their internal numeric code (decimal or 0xhex). For valid codes and
symbolic names, see the CSIDL_* definitions in the include file
/usr/include/w32api/shlobj.h from package w32api. The current valid
range of codes for folders is 0 (Desktop) to 59 (CDBurn area).
By default the output is in UNIX (POSIX) format; 
use the <code class="literal">-w</code> or <code class="literal">-d</code> options to get
other formats.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dumper"></a>dumper</h3></div></div></div><pre class="screen">
Usage: dumper [OPTION] FILENAME WIN32PID
Dump core from WIN32PID to FILENAME.core

-d, --verbose  be verbose while dumping
-h, --help     output help information and exit
-q, --quiet    be quiet while dumping (default)
-v, --version  output version information and exit
</pre><p>The <span><strong class="command">dumper</strong></span> utility can be used to create a
core dump of running Windows process. This core dump can be later loaded
to <span><strong class="command">gdb</strong></span> and analyzed. One common way to use 
<span><strong class="command">dumper</strong></span> is to plug it into cygwin's Just-In-Time 
debugging facility by adding

</p><pre class="screen">
error_start=x:\path\to\dumper.exe
</pre><p>

to the <span class="emphasis"><em>CYGWIN</em></span> environment variable. Please note that
<code class="literal">x:\path\to\dumper.exe</code> is Windows-style and not cygwin
path. If <code class="literal">error_start</code> is set this way, then dumper will
be started whenever some program encounters a fatal error.
</p><p>
<span><strong class="command">dumper</strong></span> can be also be started from the command line to 
create a core dump of any running process. Unfortunately, because of a Windows 
API limitation, when a core dump is created and <span><strong class="command">dumper</strong></span> 
exits, the target process is terminated too.
</p><p>
To save space in the core dump, <span><strong class="command">dumper</strong></span> doesn't write those
portions of target process' memory space that are loaded from executable and
dll files and are unchangeable, such as program code and debug info. Instead,
<span><strong class="command">dumper</strong></span> saves paths to files which contain that data. When a
core dump is loaded into gdb, it uses these paths to load appropriate files.
That means that if you create a core dump on one machine and try to debug it on
another, you'll need to place identical copies of the executable and dlls in 
the same directories as on the machine where the core dump was created.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="getfacl"></a>getfacl</h3></div></div></div><pre class="screen">
Usage: getfacl [-adn] FILE [FILE2...]
Display file and directory access control lists (ACLs).

  -a, --all      display the filename, the owner, the group, and
                 the ACL of the file
  -d, --dir      display the filename, the owner, the group, and
                 the default ACL of the directory, if it exists
  -h, --help     output usage information and exit
  -n, --noname   display user and group IDs instead of names
  -v, --version  output version information and exit

When multiple files are specified on the command line, a blank
line separates the ACLs for each file.
</pre><p>
For each argument that is a regular file, special file or
directory, <span><strong class="command">getfacl</strong></span> displays the owner, the group, and the 
ACL.  For directories <span><strong class="command">getfacl</strong></span> displays additionally the 
default ACL.  With no options specified, <span><strong class="command">getfacl</strong></span> displays 
the filename, the owner, the group, and both the ACL and the default ACL, if 
it exists. For more information on Cygwin and Windows ACLs, see
see <a href="ntsec.html" title="Using Windows security in Cygwin">the section called &#8220;Using Windows security in Cygwin&#8221;</a> in the Cygwin User's Guide.
The format for ACL output is as follows:
</p><pre class="screen">
     # file: filename
     # owner: name or uid
     # group: name or uid
     user::perm
     user:name or uid:perm
     group::perm
     group:name or gid:perm
     mask:perm
     other:perm
     default:user::perm
     default:user:name or uid:perm
     default:group::perm
     default:group:name or gid:perm
     default:mask:perm
     default:other:perm
</pre><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="kill"></a>kill</h3></div></div></div><pre class="screen">
Usage: kill [-f] [-signal] [-s signal] pid1 [pid2 ...]
       kill -l [signal]
Send signals to processes

 -f, --force     force, using win32 interface if necessary
 -l, --list      print a list of signal names
 -s, --signal    send signal (use kill --list for a list)
 -h, --help      output usage information and exit
 -v, --version   output version information and exit
</pre><p>The <span><strong class="command">kill</strong></span> program allows you to send arbitrary
signals to other Cygwin programs.  The usual purpose is to end a
running program from some other window when ^C won't work, but you can
also send program-specified signals such as SIGUSR1 to trigger actions
within the program, like enabling debugging or re-opening log files.
Each program defines the signals they understand.</p><p>You may need to specify the full path to use <span><strong class="command">kill</strong></span> 
from within some shells, including <span><strong class="command">bash</strong></span>, the default Cygwin
shell. This is because <span><strong class="command">bash</strong></span> defines a 
<span><strong class="command">kill</strong></span> builtin function; see the <span><strong class="command">bash</strong></span>
man page under <span class="emphasis"><em>BUILTIN COMMANDS</em></span> for more information.
To make sure you are using the Cygwin version, try

</p><pre class="screen">
$ /bin/kill --version
</pre><p>

which should give the Cygwin <span><strong class="command">kill</strong></span> version number and
copyright information.
</p><p>Unless you specific the <code class="literal">-f</code> option, the "pid" values 
used by <span><strong class="command">kill</strong></span> are the Cygwin pids, not the Windows pids.  
To get a list of running programs and their Cygwin pids, use the Cygwin
<span><strong class="command">ps</strong></span> program. <span><strong class="command">ps -W</strong></span> will display
<span class="emphasis"><em>all</em></span> windows pids.</p><p>The <span><strong class="command">kill -l</strong></span> option prints the name of the
given signal, or a list of all signal names if no signal is given.</p><p>To send a specific signal, use the <code class="literal">-signN</code>
option, either with a signal number or a signal name (minus the "SIG"
part), like these examples:</p><div class="example"><a name="utils-kill-ex"></a><p class="title"><b>Example&#160;3.7.&#160;Using the kill command</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>kill 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -1 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -HUP 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -f 123</code></strong>
</pre></div></div><br class="example-break"><p>Here is a list of available signals, their numbers, and some
commentary on them, from the file
<code class="literal">&lt;sys/signal.h&gt;</code>, which should be considered
the official source of this information.</p><pre class="screen">
SIGHUP       1    hangup
SIGINT       2    interrupt
SIGQUIT      3    quit
SIGILL       4    illegal instruction (not reset when caught)
SIGTRAP      5    trace trap (not reset when caught)
SIGABRT      6    used by abort
SIGEMT       7    EMT instruction
SIGFPE       8    floating point exception
SIGKILL      9    kill (cannot be caught or ignored)
SIGBUS      10    bus error
SIGSEGV     11    segmentation violation
SIGSYS      12    bad argument to system call
SIGPIPE     13    write on a pipe with no one to read it
SIGALRM     14    alarm clock
SIGTERM     15    software termination signal from kill
SIGURG      16    urgent condition on IO channel
SIGSTOP     17    sendable stop signal not from tty
SIGTSTP     18    stop signal from tty
SIGCONT     19    continue a stopped process
SIGCHLD     20    to parent on child stop or exit
SIGTTIN     21    to readers pgrp upon background tty read
SIGTTOU     22    like TTIN for output if (tp-&gt;t_local&amp;LTOSTOP)
SIGPOLL     23    System V name for SIGIO
SIGXCPU     24    exceeded CPU time limit
SIGXFSZ     25    exceeded file size limit
SIGVTALRM   26    virtual time alarm
SIGPROF     27    profiling time alarm
SIGWINCH    28    window changed
SIGLOST     29    resource lost (eg, record-lock lost)
SIGUSR1     30    user defined signal 1
SIGUSR2     31    user defined signal 2
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mkgroup"></a>mkgroup</h3></div></div></div><pre class="screen">
Usage: mkgroup [OPTION]...
Print /etc/group file to stdout

Options:
   -l,--local [machine[,offset]]
                           print local groups with gid offset offset
                           (from local machine if no machine specified)
   -L,--Local [machine[,offset]]
                           ditto, but generate groupname with machine prefix
   -d,--domain [domain[,offset]]
                           print domain groups with gid offset offset
                           (from current domain if no domain specified)
   -D,--Domain [domain[,offset]]
                           ditto, but generate groupname with machine prefix
   -c,--current            print current group
   -C,--Current            ditto, but generate groupname with machine or
                           domain prefix
   -S,--separator char     for -L, -D, -C use character char as domain\group
                           separator in groupname instead of the default '\'
   -o,--id-offset offset   change the default offset (10000) added to gids
                           in domain or foreign server accounts.
   -g,--group groupname    only return information for the specified group
                           one of -l, -L, -d, -D must be specified, too
   -b,--no-builtin         don't print BUILTIN groups
   -U,--unix grouplist     additionally print UNIX groups when using -l or -L
                           on a UNIX Samba server
                           grouplist is a comma-separated list of groupnames
                           or gid ranges (root,-25,50-100).
			   (enumerating large ranges can take a long time!)
   -s,--no-sids            (ignored)
   -u,--users              (ignored)
   -h,--help               print this message
   -v,--version            print version information and exit

Default is to print local groups on stand-alone machines, plus domain
groups on domain controllers and domain member machines.
</pre><p>The <span><strong class="command">mkgroup</strong></span> program can be used to help
configure Cygwin by creating a <code class="filename">/etc/group</code>
file.  Its use is essential to include Windows security information.</p><p>The command is initially called by <span><strong class="command">setup.exe</strong></span> to
create a default <code class="filename">/etc/group</code>.  This should be
sufficient in most circumstances.  However, especially when working
in a multi-domain environment, you can use <span><strong class="command">mkgroup</strong></span>
manually to create a more complete <code class="filename">/etc/group</code> file for
all domains.  Especially when you have the same group name used on
multiple machines or in multiple domains, you can use the <code class="literal">-D</code>,
<code class="literal">-L</code> and <code class="literal">-C</code> options to create unique
domain\group style groupnames.</p><p>Note that this information is static.  If you change the group
information in your system, you'll need to regenerate the group file
for it to have the new information.</p><p>The <code class="literal">-d/-D</code> and <code class="literal">-l/-L</code> options
allow you to specify where the information comes from, the
local SAM of a machine or from the domain, or both.
With the <code class="literal">-d/-D</code> options the program contacts a Domain
Controller, which my be unreachable or have restricted access.
Comma-separated from the machine or domain, you can specify an offset
which is used as base added to the group's RID to compute the gid
(offset + RID = gid).  This allows to create the same gids every time you
re-run <span><strong class="command">mkgroup</strong></span>.
For very simple needs, an entry for the current user's group can be
created by using the option <code class="literal">-c</code> or <code class="literal">-C</code>.
If you want to use one of the <code class="literal">-D</code>, <code class="literal">-L</code>
or <code class="literal">-C</code> options, but you don't like the backslash as
domain/group separator, you can specify another separator using the
<code class="literal">-S</code> option, for instance</p><div class="example"><a name="utils-mkgroup-ex"></a><p class="title"><b>Example&#160;3.8.&#160;Setting up group entry for current user with different domain/group separator</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mkgroup -C -S+ &gt; /etc/group</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>cat /etc/group</code></strong>
DOMAIN+my_group:S-1-5-21-2913048732-1697188782-3448811101-1144:11144:
</pre></div></div><br class="example-break"><p>The <code class="literal">-o</code> option allows for special cases
(such as multiple domains) where the GIDs might match otherwise.
The <code class="literal">-g</code> option only prints the information for one group.
The <code class="literal">-U</code> option allows to enumerate the standard UNIX
groups on a Samba machine.  It's used together with
<code class="literal">-l samba-server</code> or <code class="literal">-L samba-server</code>.
The normal UNIX groups are usually not enumerated, but they can show
up as group in <span><strong class="command">ls -l</strong></span> output.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mkpasswd"></a>mkpasswd</h3></div></div></div><pre class="screen">
Usage: mkpasswd [OPTIONS]...
Print /etc/passwd file to stdout

Options:
   -l,--local [machine[,offset]]
                           print local user accounts with uid offset offset
                           (from local machine if no machine specified)
   -L,--Local [machine[,offset]]
                           ditto, but generate username with machine prefix
   -d,--domain [domain[,offset]]
                           print domain accounts with uid offset offset
                           (from current domain if no domain specified)
   -D,--Domain [domain[,offset]]
                           ditto, but generate username with domain prefix
   -c,--current            print current user
   -C,--Current            ditto, but generate username with machine or
                           domain prefix
   -S,--separator char     for -L, -D, -C use character char as domain\user
                           separator in username instead of the default '\'
   -o,--id-offset offset   change the default offset (10000) added to uids
                           in domain or foreign server accounts.
   -u,--username username  only return information for the specified user
                           one of -l, -L, -d, -D must be specified, too
   -p,--path-to-home path  use specified path instead of user account home dir
                           or /home prefix
   -m,--no-mount           don't use mount points for home dir
   -U,--unix userlist      additionally print UNIX users when using -l or -L\
                           on a UNIX Samba server
                           userlist is a comma-separated list of usernames
                           or uid ranges (root,-25,50-100).
                           (enumerating large ranges can take a long time!)
   -s,--no-sids            (ignored)
   -g,--local-groups       (ignored)
   -h,--help               displays this message
   -v,--version            version information and exit

Default is to print local accounts on stand-alone machines, domain accounts
on domain controllers and domain member machines.
</pre><p>The <span><strong class="command">mkpasswd</strong></span> program can be used to help
configure Cygwin by creating a <code class="filename">/etc/passwd</code> from
your system information.
Its use is essential to include Windows security information.  However,
the actual passwords are determined by Windows, not by the content of
<code class="filename">/etc/passwd</code>.</p><p>The command is initially called by <span><strong class="command">setup.exe</strong></span> to
create a default <code class="filename">/etc/passwd</code>.  This should be
sufficient in most circumstances.  However, especially when working
in a multi-domain environment, you can use <span><strong class="command">mkpasswd</strong></span>
manually to create a more complete <code class="filename">/etc/passwd</code> file for
all domains.  Especially when you have the same user name used on
multiple machines or in multiple domains, you can use the <code class="literal">-D</code>,
<code class="literal">-L</code> and <code class="literal">-C</code> options to create unique
domain\user style usernames.</p><p>Note that this information is static.  If you change the user
information in your system, you'll need to regenerate the passwd file
for it to have the new information.</p><p>The <code class="literal">-d/-D</code> and <code class="literal">-l/-L</code> options
allow you to specify where the information comes from, the
local machine or the domain (default or given), or both.
With the  <code class="literal">-d/-D</code> options the program contacts the Domain
Controller, which may be unreachable or have restricted access.
Comma-separated from the machine or domain, you can specify an offset
which is used as base added to the user's RID to compute the uid
(offset + RID = uid).  This allows to create the same uids every time you
re-run <span><strong class="command">mkpasswd</strong></span>.
An entry for the current user can be created by using the
option <code class="literal">-c</code> or  <code class="literal">-C</code>.
If you want to use one of the <code class="literal">-D</code>, <code class="literal">-L</code>
or <code class="literal">-C</code> options, but you don't like the backslash as
domain/group separator, you can specify another separator using the
<code class="literal">-S</code> option, simialar to the <span><strong class="command">mkgroup</strong></span>.
The <code class="literal">-o</code> option allows for special cases
(such as multiple domains) where the UIDs might match otherwise.
The <code class="literal">-m</code> option bypasses the current
mount table so that, for example, two users who have a Windows home 
directory of H: could mount them differently.  For more information on
SIDs, see <a href="ntsec.html" title="Using Windows security in Cygwin">the section called &#8220;Using Windows security in Cygwin&#8221;</a> in the Cygwin User's Guide.  The
<code class="literal">-p</code> option causes <span><strong class="command">mkpasswd</strong></span> to
use the specified prefix instead of the account home dir or <code class="literal">/home/
</code>. For example, this command:

</p><div class="example"><a name="utils-althome-ex"></a><p class="title"><b>Example&#160;3.9.&#160;Using an alternate home root</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mkpasswd -l -p "$(cygpath -H)" &gt; /etc/passwd</code></strong>
</pre></div></div><p><br class="example-break">

would put local users' home directories in the Windows 'Profiles' directory. 
The <code class="literal">-u</code> option creates just an entry for
the specified user.
The <code class="literal">-U</code> option allows to enumerate the standard UNIX
users on a Samba machine.  It's used together with
<code class="literal">-l samba-server</code> or <code class="literal">-L samba-server</code>.
The normal UNIX users are usually not enumerated, but they can show
up as file owners in <span><strong class="command">ls -l</strong></span> output.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mount"></a>mount</h3></div></div></div><pre class="screen">
Usage: mount [OPTION] [&lt;win32path&gt; &lt;posixpath&gt;]
Display information about mounted filesystems, or mount a filesystem

  -c, --change-cygdrive-prefix  change the cygdrive path prefix to &lt;posixpath&gt;
  -f, --force                   force mount, don't warn about missing mount
                                point directories
  -h, --help                    output usage information and exit
  -m, --mount-entries           write fstab entries to replicate mount points
                                and cygdrive prefixes
  -o, --options X[,X...]        specify mount options
  -p, --show-cygdrive-prefix    show user and/or system cygdrive path prefix
  -v, --version                 output version information and exit
</pre><p>The <span><strong class="command">mount</strong></span> program is used to map your drives
and shares onto Cygwin's simulated POSIX directory tree, much like as is
done by mount commands on typical UNIX systems.  However, in contrast to
mount points given in <code class="filename">/etc/fstab</code>, mount points
created or changed with <span><strong class="command">mount</strong></span> are not persistent.  They
disappear immediately after the last process of the current user exited.
Please see <a href="using.html#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> for more information on the
concepts behind the Cygwin POSIX file system and strategies for using
mounts. To remove mounts temporarily, use <span><strong class="command">umount</strong></span></p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="utils-mount"></a>Using mount</h4></div></div></div><p>If you just type <span><strong class="command">mount</strong></span> with no parameters, it
will display the current mount table for you.</p><div class="example"><a name="utils-mount-ex"></a><p class="title"><b>Example&#160;3.10.&#160;Displaying the current set of mount points</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">c:\cygwin\&gt;</code> <strong class="userinput"><code>mount</code></strong>
c:\cygwin\bin on /usr/bin type ntfs (binary)
c:\cygwin\lib on /usr/lib type ntfs (binary)
c:\cygwin on / type ntfs (binary)
c: on /c type ntfs (binary,user,noumount)
d: on /d type fat (binary,user,noumount)
</pre></div></div><br class="example-break"><p>In this example, c:\cygwin is the POSIX root and D drive is mapped to
<code class="filename">/d</code>.  Note that in this case, the root mount is a
system-wide mount point that is visible to all users running Cygwin
programs, whereas the <code class="filename">/d</code> mount is only visible
to the current user.</p><p>The <span><strong class="command">mount</strong></span> utility is also the mechanism for
adding new mounts to the mount table.  The following example
demonstrates how to mount the directory
<code class="filename">//pollux/home/joe/data</code> to <code class="filename">/data</code>
for the duration of the current session.
</p><div class="example"><a name="utils-mount-add-ex"></a><p class="title"><b>Example&#160;3.11.&#160;Adding mount points</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">c:\cygwin\&gt;</code> <strong class="userinput"><code>ls /data</code></strong>
ls: /data: No such file or directory
<code class="prompt">c:\cygwin\&gt;</code> <strong class="userinput"><code>mount //pollux/home/joe/data /data</code></strong>
mount: warning - /data does not exist!
<code class="prompt">c:\cygwin\&gt;</code> <strong class="userinput"><code>mount</code></strong>
//pollux/home/joe/data on /data type smbfs (binary)
c:/cygwin/bin on /usr/bin type ntfs (binary)
c:/cygwin/lib on /usr/lib type ntfs (binary)
c:/cygwin on / type ntfs (binary)
c: on /c type ntfs (binary,user,noumount)
d: on /d type fat (binary,user,noumount)
</pre></div></div><br class="example-break"><p>A given POSIX path may only exist once in the mount table.  Attempts to
replace the mount will fail with a busy error.  The <code class="literal">-f</code>
(force) option causes the old mount to be silently replaced with the new one,
provided the old mount point was a user mount point.  It's not valid to
replace system-wide mount points.  Additionally, the <code class="literal">-f</code>
option will silence warnings about the non-existence of directories at the
Win32 path location.</p><p>
The <code class="literal">-o</code> option is the method via which various options about
the mount point may be recorded.  The following options are available (note that
most of the options are duplicates of other mount flags):</p><pre class="screen">
  acl        - Use the filesystem's access control lists (ACLs) to
               implement real POSIX permissions (default).
  noacl      - Ignore ACLs and fake POSIX permissions.
  binary     - Files default to binary mode (default).
  text       - Files default to CRLF text mode line endings.
  exec       - Treat all files below mount point as executable.
  notexec    - Treat all files below mount point as not executable.
  cygexec    - Treat all files below mount point as cygwin executables.
  nosuid     - No suid files are allowed (currently unimplemented)
  posix=0    - Switch off case sensitivity for paths under this mount point.
  posix=1    - Switch on case sensitivity for paths under this mount point
               (default).
</pre><p>For a more complete description of the mount options and the
<code class="filename">/etc/fstab</code> file, see
<a href="using.html#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a>.</p><p>Note that all mount points added with <span><strong class="command">mount</strong></span> are
user mount points.  System mount points can only be specified in
the <code class="filename">/etc/fstab</code> file.</p><p>
The <code class="literal">-m</code> option causes the <span><strong class="command">mount</strong></span> utility
to output the current mount table in a series of fstab entries.  This allows
You can save this output as a backup when experimenting with the mount table.
Copy the output to <code class="filename">/etc/fstab</code> to restore the old state.
It also makes moving your settings to a different machine much easier.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="utils-cygdrive"></a>Cygdrive mount points</h4></div></div></div><p>Whenever Cygwin cannot use any of the existing mounts to convert
from a particular Win32 path to a POSIX one, Cygwin will, instead,
convert to a POSIX path using a default mount point:
<code class="filename">/cygdrive</code>.  For example, if Cygwin accesses
<code class="filename">z:\foo</code> and the z drive is not currently in the
mount table, then <code class="filename">z:\</code> will be accessible as
<code class="filename">/cygdrive/z</code>.  The <span><strong class="command">mount</strong></span> utility 
can be used to change this default automount prefix through the use of the
"--change-cygdrive-prefix" option.  In the following example, we will
set the automount prefix to <code class="filename">/</code>:</p><div class="example"><a name="utils-cygdrive-ex"></a><p class="title"><b>Example&#160;3.12.&#160;Changing the default prefix</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">c:\cygwin\&gt;</code> <strong class="userinput"><code>mount --change-cygdrive-prefix /</code></strong>
</pre></div></div><br class="example-break"><p>Note that the cygdrive prefix can be set both per-user and system-wide, 
and that as with all mounts, a user-specific mount takes precedence over the 
system-wide setting.  The <span><strong class="command">mount</strong></span> utility creates system-wide 
mounts by default if you do not specify a type.  Use the <code class="literal">-s</code> 
or <code class="literal">-u</code> flag to indicate a system or user mount, respectively.
You can always see the user and system cygdrive prefixes with the 
<code class="literal">-p</code> option.  Using the <code class="literal">-b</code>
flag with <code class="literal">--change-cygdrive-prefix</code> makes all new 
automounted filesystems default to binary mode file accesses.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="utils-limitations"></a>Limitations</h4></div></div></div><p>Limitations: there is a hard-coded limit of 30 mount
points.  Also, although you can mount to pathnames that do not start
with "/", there is no way to make use of such mount points.</p><p>Normally the POSIX mount point in Cygwin is an existing empty
directory, as in standard UNIX. If this is the case, or if there is a
place-holder for the mount point (such as a file, a symbolic link
pointing anywhere, or a non-empty directory), you will get the expected
behavior. Files present in a mount point directory before the mount
become invisible to Cygwin programs.
</p><p>It is sometimes desirable to mount to a non-existent directory,
for example to avoid cluttering the root directory with names
such as
<code class="filename">a</code>, <code class="filename">b</code>, <code class="filename">c</code>
pointing to disks.
Although <span><strong class="command">mount</strong></span> will give you a warning, most
everything will work properly when you refer to the mount point
explicitly.  Some strange effects can occur however.
For example if your current working directory is
<code class="filename">/dir</code>,
say, and <code class="filename">/dir/mtpt</code> is a mount point, then
<code class="filename">mtpt</code> will not show up in an <span><strong class="command">ls</strong></span>
or
<span><strong class="command">echo *</strong></span> command and <span><strong class="command">find .</strong></span> will
not
find <code class="filename">mtpt</code>.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="passwd"></a>passwd</h3></div></div></div><pre class="screen">
Usage: passwd [OPTION] [USER]
Change USER's password or password attributes.

User operations:
  -l, --lock               lock USER's account.
  -u, --unlock             unlock USER's account.
  -c, --cannot-change      USER can't change password.
  -C, --can-change         USER can change password.
  -e, --never-expires      USER's password never expires.
  -E, --expires            USER's password expires according to system's
                           password aging rule.
  -p, --pwd-not-required   no password required for USER.
  -P, --pwd-required       password is required for USER.
  -R, --reg-store-pwd      enter password to store it in the registry for
                           later usage by services to be able to switch
                           to this user context with network credentials.

System operations:
  -i, --inactive NUM       set NUM of days before inactive accounts are disabled
                           (inactive accounts are those with expired passwords).
  -n, --minage DAYS        set system minimum password age to DAYS days.
  -x, --maxage DAYS        set system maximum password age to DAYS days.
  -L, --length LEN         set system minimum password length to LEN.

Other options:
  -S, --status             display password status for USER (locked, expired,
                           etc.) plus global system password settings.
  -h, --help               output usage information and exit.
  -v, --version            output version information and exit.

If no option is given, change USER's password.  If no user name is given,
operate on current user.  System operations must not be mixed with user
operations.  Don't specify a USER when triggering a system operation. 

Don't specify a user or any other option together with the -R option.
Non-Admin users can only store their password if cygserver is running and
the CYGWIN environment variable is set to contain the word 'server'.
Note that storing even obfuscated passwords in the registry is not overly
secure.  Use this feature only if the machine is adequately locked down.
Don't use this feature if you don't need network access within a remote
session.  You can delete your stored password by using `passwd -R' and
specifying an empty password.
</pre><p> <span><strong class="command">passwd</strong></span> changes passwords for user accounts.
A normal user may only change the password for their own account,
but administrators may change passwords on any account.
<span><strong class="command">passwd</strong></span> also changes account information, such as
password expiry dates and intervals.</p><p>For password changes, the user is first prompted for their old
password, if one is present.  This password is then encrypted and
compared against the stored password.  The user has only one chance to
enter the correct password.  The administrators are permitted to
bypass this step so that forgotten passwords may be changed.</p><p>The user is then prompted for a replacement password.
<span><strong class="command">passwd</strong></span> will prompt twice for this replacement and 
compare the second entry against the first.  Both entries are required to 
match in order for the password to be changed.</p><p>After the password has been entered, password aging information
is checked to see if the user is permitted to change their password
at this time.  If not, <span><strong class="command">passwd</strong></span> refuses to change the
password and exits.</p><p>
To get current password status information, use the
<code class="literal">-S</code> option. Administrators can use
<span><strong class="command">passwd</strong></span> to perform several account maintenance
functions (users may perform some of these functions on their own
accounts).  Accounts may be locked with the <code class="literal">-l</code> flag
and unlocked with the <code class="literal">-u</code> flag.  Similarly,
<code class="literal">-c</code> disables a user's ability to change passwords, and
<code class="literal">-C</code> allows a user to change passwords.  For password
expiry, the <code class="literal">-e</code> option disables expiration, while the
<code class="literal">-E</code> option causes the password to expire according to
the system's normal aging rules.  Use <code class="literal">-p</code> to disable
the password requirement for a user, or <code class="literal">-P</code> to require
a password.
</p><p>Administrators can also use <span><strong class="command">passwd</strong></span> to change
system-wide password expiry and length requirements with the
<code class="literal">-i</code>, <code class="literal">-n</code>, <code class="literal">-x</code>,
and <code class="literal">-L</code> options.  The <code class="literal">-i</code>
option is used to disable an account after the password has been expired
for a number of days.  After a user account has had an expired password
for <span class="emphasis"><em>NUM</em></span> days, the user may no longer sign on to
the account.  The <code class="literal">-n</code> option is
used to set the minimum number of days before a password may be changed.
The user will not be permitted to change the password until
<span class="emphasis"><em>MINDAYS</em></span> days have elapsed.  The
<code class="literal">-x</code> option is used to set the maximum number of days
a password remains valid.  After <span class="emphasis"><em>MAXDAYS</em></span> days, the
password is required to be changed.  Allowed values for the above options 
are 0 to 999.  The <code class="literal">-L</code> option sets the minimum length of 
allowed passwords for users who don't belong to the administrators group
to <span class="emphasis"><em>LEN</em></span> characters.  Allowed values for the minimum
password length are 0 to 14.  In any of the above cases, a value of 0
means `no restrictions'.</p><p>Users can use the <span><strong class="command">passwd -R</strong></span> to enter
a password which then gets stored in a special area of the registry,
which is also used by Windows to store passwords of accounts running
Windows services.  When a privileged Cygwin application calls the
<span><strong class="command">set{e}uid(user_id)</strong></span> system call, Cygwin checks if a
password for that user has been stored in this registry area.  If so, it
uses this password to switch to this user account using that password.
This allows to logon through, for instance, <span><strong class="command">ssh</strong></span> with
public key authentication and to get a full qualified user token with
all credentials for network access.  However, the method has some
drawbacks security-wise.  This is explained in more detail in the
<a href="ntsec.html" title="Using Windows security in Cygwin">the section called &#8220;Using Windows security in Cygwin&#8221;</a> section.</p><p>Please note that storing password in that registry area is a
privileged operation which only administrative accounts are allowed to
do.  If normal, non-admin users should be allowed to enter their
passwords using <span><strong class="command">passwd -R</strong></span>, it's required to run
<span><strong class="command">cygserver</strong></span> as a service under the LocalSystem account
and the environment variable CYGWIN
(see <a href="using-cygwinenv.html" title="The CYGWIN environment
variable">the section called &#8220;The <code class="envar">CYGWIN</code> environment
variable&#8221;</a>)
must be set to contain the "server" setting before running
<span><strong class="command">passwd -R</strong></span>.  This only affects storing passwords.
Using passwords in privileged processes does not require
<span><strong class="command">cygserver</strong></span> to run.</p><p>Limitations: Users may not be able to change their password on
some systems.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ps"></a>ps</h3></div></div></div><pre class="screen">
Usage: ps [-aefls] [-u UID]
Report process status

 -a, --all       show processes of all users
 -e, --everyone  show processes of all users
 -f, --full      show process uids, ppids
 -h, --help      output usage information and exit
 -l, --long      show process uids, ppids, pgids, winpids
 -p, --process   show information for specified PID
 -s, --summary   show process summary
 -u, --user      list processes owned by UID
 -v, --version   output version information and exit
 -W, --windows   show windows as well as cygwin processes
With no options, ps outputs the long format by default
</pre><p>The <span><strong class="command">ps</strong></span> program gives the status of all the
Cygwin processes running on the system (ps = "process status").  Due
to the limitations of simulating a POSIX environment under Windows,
there is little information to give.  
</p><p>
The PID column is the process ID you need to give to the 
<span><strong class="command">kill</strong></span> command. The PPID is the parent process ID,
and PGID is the process group ID.  The WINPID column is the process 
ID displayed by NT's Task Manager program. The TTY column gives which 
pseudo-terminal a process is running on, or a <code class="literal">'?'</code>
for services. The UID column shows which user owns each process. 
STIME is the time the process was started, and COMMAND gives the name
of the program running. Listings may also have a status flag in
column zero; <code class="literal">S</code> means stopped or suspended (in other
words, in the background), <code class="literal">I</code> means waiting for
input or interactive (foreground), and <code class="literal">O</code> means
waiting to output. 
</p><p>
By default <span><strong class="command">ps</strong></span> will only show processes owned by the
current user. With either the <code class="literal">-a</code> or <code class="literal">-e</code>
option, all user's processes (and system processes) are listed. There are
historical UNIX reasons for the synonomous options, which are functionally
identical. The <code class="literal">-f</code> option outputs a "full" listing with
usernames for UIDs. The <code class="literal">-l</code> option is the default display
mode, showing a "long" listing with all the above columns. The other display
option is <code class="literal">-s</code>, which outputs a shorter listing of just
PID, TTY, STIME, and COMMAND. The <code class="literal">-u</code> option allows you
to show only processes owned by a specific user. The <code class="literal">-p</code>
option allows you to show information for only the process with the
specified PID. The <code class="literal">-W</code>
option causes <span><strong class="command">ps</strong></span> show non-Cygwin Windows processes as 
well as Cygwin processes. The WINPID is also the PID, and they can be killed
with the Cygwin <span><strong class="command">kill</strong></span> command's <code class="literal">-f</code>
option.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="regtool"></a>regtool</h3></div></div></div><pre class="screen">
Usage: regtool [OPTION] (add|check|get|list|remove|unset|load|unload|save) KEY
View or edit the Win32 registry

Actions:
 add KEY\SUBKEY             add new SUBKEY
 check KEY                  exit 0 if KEY exists, 1 if not
 get KEY\VALUE              prints VALUE to stdout
 list KEY                   list SUBKEYs and VALUEs
 remove KEY                 remove KEY
 set KEY\VALUE [data ...]   set VALUE
 unset KEY\VALUE            removes VALUE from KEY
 load KEY\SUBKEY PATH       load hive from PATH into new SUBKEY
 unload KEY\SUBKEY          unload hive and remove SUBKEY
 save KEY\SUBKEY PATH       save SUBKEY into new hive PATH

Options for 'list' Action:
 -k, --keys           print only KEYs
 -l, --list           print only VALUEs
 -p, --postfix        like ls -p, appends '\' postfix to KEY names

Options for 'get' Action:
 -b, --binary         print REG_BINARY data as hex bytes

Options for 'set' Action:
 -b, --binary         set type to REG_BINARY (hex args or '-')
 -e, --expand-string  set type to REG_EXPAND_SZ
 -i, --integer        set type to REG_DWORD
 -m, --multi-string   set type to REG_MULTI_SZ
 -s, --string         set type to REG_SZ

Options for 'set' and 'unset' Actions:
 -K&lt;c&gt;, --key-separator[=]&lt;c&gt;  set key separator to &lt;c&gt; instead of '\'

Other Options:
 -h, --help     output usage information and exit
 -q, --quiet    no error output, just nonzero return if KEY/VALUE missing
 -v, --verbose  verbose output, including VALUE contents when applicable
 -w, --wow64    access 64 bit registry view (ignored on 32 bit Windows)
 -W, --wow32    access 32 bit registry view (ignored on 32 bit Windows)
 -V, --version  output version information and exit

KEY is in the format [host]\prefix\KEY\KEY\VALUE, where host is optional
remote host in either \\hostname or hostname: format and prefix is any of:
  root     HKCR  HKEY_CLASSES_ROOT (local only)
  config   HKCC  HKEY_CURRENT_CONFIG (local only)
  user     HKCU  HKEY_CURRENT_USER (local only)
  machine  HKLM  HKEY_LOCAL_MACHINE
  users    HKU   HKEY_USERS

You can use forward slash ('/') as a separator instead of backslash, in
that case backslash is treated as escape character
Example: regtool.exe get '\user\software\Microsoft\Clock\iFormat'
</pre><p>The <span><strong class="command">regtool</strong></span> program allows shell scripts
to access and modify the Windows registry.  Note that modifying the
Windows registry is dangerous, and carelessness here can result
in an unusable system.  Be careful.</p><p>The <code class="literal">-v</code> option means "verbose".  For most
commands, this causes additional or lengthier messages to be printed.
Conversely, the <code class="literal">-q</code> option supresses error messages,
so you can use the exit status of the program to detect if a key
exists or not (for example).</p><p>The <code class="literal">-w</code> option allows to access the 64 bit view
on the registry.  Several subkeys exist in a 32 bit and a 64 bit version
when running on Windows 64.  Since Cygwin is running in 32 bit mode, it
has only access to the 32 bit view of these registry keys.  When using
the <code class="literal">-w</code> the 64 bit view is used and
<span><strong class="command">regtool</strong></span> can access the entire registry.
This option is simply ignored when running on 32 bit Windows versions.
</p><p>The <code class="literal">-W</code> option allows to access the 32 bit view
on the registry.  The purpose of this  option is mainly symmetry.  It
allows to create OS agnostic scripts which would also work in a hypothetic
64 bit version of Cygwin.</p><p>You must provide <span><strong class="command">regtool</strong></span> with an 
<span class="emphasis"><em>action</em></span> following options (if any). Currently,
the action must be <code class="literal">add</code>, <code class="literal">set</code>,
<code class="literal">check</code>, <code class="literal">get</code>, <code class="literal">list</code>,
<code class="literal">remove</code>, <code class="literal">set</code>, or <code class="literal">unset</code>.
</p><p>The <code class="literal">add</code> action adds a new key.  The 
<code class="literal">check</code> action checks to see if a key exists (the 
exit code of the program is zero if it does, nonzero if it does not).
The <code class="literal">get</code> action gets the value of a value of a key,
and prints it (and nothing else) to stdout.  Note: if the value
doesn't exist, an error message is printed and the program returns a
non-zero exit code.  If you give <code class="literal">-q</code>, it doesn't
print the message but does return the non-zero exit code.</p><p>
The <code class="literal">list</code> action lists the subkeys and values
belonging to the given key. With <code class="literal">list</code>, the 
<code class="literal">-k</code> option instructs <span><strong class="command">regtool</strong></span>
to print only KEYs, and the <code class="literal">-l</code> option to print
only VALUEs. The <code class="literal">-p</code> option postfixes a 
<code class="literal">'/'</code> to each KEY, but leave VALUEs with no
postfix.  The <code class="literal">remove</code> action 
removes a key.  Note that you may need to remove everything in the key 
before you may remove it, but don't rely on this stopping you from 
accidentally removing too much.  
</p><p>The <code class="literal">set</code> action sets a value within a key.
<code class="literal">-b</code> means it's binary data (REG_BINARY).
The binary values are specified as hex bytes in the argument list.
If the argument is <code class="literal">'-'</code>, binary data is read
from stdin instead.
<code class="literal">-e</code> means it's an expanding string (REG_EXPAND_SZ)
that contains embedded environment variables.  
<code class="literal">-i</code> means the value is an integer (REG_DWORD).
<code class="literal">-m</code> means it's a multi-string (REG_MULTI_SZ).  
<code class="literal">-s</code> means the value is a string (REG_SZ).
If you don't specify one of these, <span><strong class="command">regtool</strong></span> tries to
guess the type based on the value you give.  If it looks like a
number, it's a DWORD.  If it starts with a percent, it's an expanding
string.  If you give multiple values, it's a multi-string.  Else, it's
a regular string.
The <code class="literal">unset</code> action removes a value from a key.
</p><p>The <code class="literal">load</code> action adds a new subkey and loads
the contents of a registry hive into it.
The parent key must be HKEY_LOCAL_MACHINE or HKEY_USERS.
The <code class="literal">unload</code> action unloads the file and removes
the subkey.
</p><p>The <code class="literal">save</code> action saves a subkey into a
registry hive.
</p><p>
By default, the last "\" or "/" is assumed to be the separator between the
key and the value.  You can use the <code class="literal">-K</code> option to provide 
an alternate key/value separator character.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="setfacl"></a>setfacl</h3></div></div></div><pre class="screen">
Usage: setfacl [-r] (-f ACL_FILE | -s acl_entries) FILE...
       setfacl [-r] ([-d acl_entries] [-m acl_entries]) FILE...
Modify file and directory access control lists (ACLs)

  -d, --delete     delete one or more specified ACL entries
  -f, --file       set ACL entries for FILE to ACL entries read
                   from a ACL_FILE
  -m, --modify     modify one or more specified ACL entries
  -r, --replace    replace mask entry with maximum permissions
                   needed for the file group class
  -s, --substitute substitute specified ACL entries for the
                   ACL of FILE
  -h, --help       output usage information and exit
  -v, --version    output version information and exit

At least one of (-d, -f, -m, -s) must be specified
</pre><p>
For each file given as parameter, <span><strong class="command">setfacl</strong></span> will 
either replace its complete ACL (<code class="literal">-s</code>, <code class="literal">-f</code>), 
or it will add, modify, or delete ACL entries.
For more information on Cygwin and Windows ACLs, see
see <a href="ntsec.html" title="Using Windows security in Cygwin">the section called &#8220;Using Windows security in Cygwin&#8221;</a> in the Cygwin User's Guide.
</p><p>
Acl_entries are one or more comma-separated ACL entries 
from the following list:
</p><pre class="screen">
         u[ser]::perm
         u[ser]:uid:perm
         g[roup]::perm
         g[roup]:gid:perm
         m[ask]::perm
         o[ther]::perm
</pre><p>
Default entries are like the above with the additional
default identifier. For example: 
</p><pre class="screen">
         d[efault]:u[ser]:uid:perm
</pre><p>
</p><p>
<span class="emphasis"><em>perm</em></span> is either a 3-char permissions string in the form
"rwx" with the character <code class="literal">'-'</code> for no permission
or it is the octal representation of the permissions, a
value from 0 (equivalent to "---") to 7 ("rwx").
<span class="emphasis"><em>uid</em></span> is a user name or a numerical uid.
<span class="emphasis"><em>gid</em></span> is a group name or a numerical gid.
</p><p>
The following options are supported:
</p><p>
<code class="literal">-d</code>
Delete one or more specified entries from the file's ACL.
The owner, group and others entries must not be deleted.
Acl_entries to be deleted should be specified without
permissions, as in the following list:
</p><pre class="screen">
         u[ser]:uid
         g[roup]:gid
         d[efault]:u[ser]:uid
         d[efault]:g[roup]:gid
         d[efault]:m[ask]:
         d[efault]:o[ther]:
</pre><p>
</p><p>
<code class="literal">-f</code>
Take the Acl_entries from ACL_FILE one per line. Whitespace
characters are ignored, and the character "#" may be used
to start a comment.  The special filename "-" indicates
reading from stdin. Note that you can use this with 
<span><strong class="command">getfacl</strong></span> and <span><strong class="command">setfacl</strong></span> to copy 
ACLs from one file to another:
</p><pre class="screen">
$ getfacl source_file | setfacl -f - target_file
</pre><p>
</p><p>
Required entries are: 
one user entry for the owner of the file,
one group entry for the group of the file, and
one other entry.
</p><p>
If additional user and group entries are given:
a mask entry for the file group class of the file, and 
no duplicate user or group entries with the same uid/gid.
</p><p>
If it is a directory:
one default user entry for the owner of the file,
one default group entry for the group of the file,
one default mask entry for the file group class, and
one default other entry.
</p><p>
<code class="literal">-m</code>
Add or modify one or more specified ACL entries.  Acl_entries is a 
comma-separated list of entries from the same list as above.
</p><p>
<code class="literal">-r</code>   
Causes the permissions specified in the mask 
entry to be ignored and replaced by the maximum permissions needed for 
the file group class.
</p><p>
<code class="literal">-s</code>   
Like <code class="literal">-f</code>, but substitute the 
file's ACL with Acl_entries specified in a comma-separated list on the 
command line.
</p><p>
While the <code class="literal">-d</code> and <code class="literal">-m</code> options may be used 
in the same command, the <code class="literal">-f</code> and <code class="literal">-s</code> 
options may be used only exclusively.
</p><p>
Directories may contain default ACL entries.  Files created
in a directory that contains default ACL entries will have
permissions according to the combination of the current umask,
the explicit permissions requested and the default ACL entries
</p><p>
Limitations: Under Cygwin, the default ACL entries are not taken into
account currently.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ssp"></a>ssp</h3></div></div></div><pre class="screen">
Usage: ssp [options] low_pc high_pc command...
Single-step profile COMMAND

 -c, --console-trace  trace every EIP value to the console. *Lots* slower.
 -d, --disable        disable single-stepping by default; use
                      OutputDebugString ("ssp on") to enable stepping
 -e, --enable         enable single-stepping by default; use
                      OutputDebugString ("ssp off") to disable stepping
 -h, --help           output usage information and exit
 -l, --dll            enable dll profiling.  A chart of relative DLL usage
                      is produced after the run.
 -s, --sub-threads    trace sub-threads too.  Dangerous if you have
                      race conditions.
 -t, --trace-eip      trace every EIP value to a file TRACE.SSP.  This
                      gets big *fast*.
 -v, --verbose        output verbose messages about debug events.
 -V, --version        output version information and exit

Example: ssp 0x401000 0x403000 hello.exe
</pre><p>
SSP - The Single Step Profiler
</p><p>
Original Author:  DJ Delorie 
</p><p>
The SSP is a program that uses the Win32 debug API to run a program
one ASM instruction at a time.  It records the location of each
instruction used, how many times that instruction is used, and all
function calls.  The results are saved in a format that is usable by
the profiling program <span><strong class="command">gprof</strong></span>, although 
<span><strong class="command">gprof</strong></span> will claim the values
are seconds, they really are instruction counts.  More on that later.
</p><p>
Because the SSP was originally designed to profile the cygwin DLL, it
does not automatically select a block of code to report statistics on.
You must specify the range of memory addresses to keep track of
manually, but it's not hard to figure out what to specify.  Use the
"objdump" program to determine the bounds of the target's ".text"
section.  Let's say we're profiling cygwin1.dll.  Make sure you've
built it with debug symbols (else <span><strong class="command">gprof</strong></span> won't run) 
and run objdump like this:

</p><pre class="screen">
$ objdump -h cygwin1.dll
</pre><p>

It will print a report like this:
</p><pre class="screen">
cygwin1.dll:     file format pei-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         0007ea00  61001000  61001000  00000400  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE, DATA
  1 .data         00008000  61080000  61080000  0007ee00  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  . . .
</pre><p>
</p><p>
The only information we're concerned with are the VMA of 
the .text section and the VMA of the section after it 
(sections are usually contiguous; you can also add the 
Size to the VMA to get the end address).  In this case, 
the VMA is 0x61001000 and the ending address is either 
0x61080000 (start of .data method) or 0x0x6107fa00 (VMA+Size
method).
</p><p>
There are two basic ways to use SSP - either profiling a whole
program, or selectively profiling parts of the program.
</p><p>
To profile a whole program, just run <span><strong class="command">ssp</strong></span> without options.  
By default, it will step the whole program.  Here's a simple example, using 
the numbers above:

</p><pre class="screen">
$ ssp 0x61001000 0x61080000 hello.exe
</pre><p>

This will step the whole program.  It will take at least 8 minutes on
a PII/300 (yes, really).  When it's done, it will create a file called
"gmon.out".  You can turn this data file into a readable report with
<span><strong class="command">gprof</strong></span>:

</p><pre class="screen">
$ gprof -b cygwin1.dll
</pre><p>

The "-b" means 'skip the help pages'.  You can omit this until you're
familiar with the report layout.  The <span><strong class="command">gprof</strong></span> documentation 
explains a lot about this report, but <span><strong class="command">ssp</strong></span> changes a few 
things.  For example, the first part of the report reports the amount of time 
spent in each function, like this:

</p><pre class="screen">
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 10.02    231.22    72.43       46  1574.57  1574.57  strcspn
  7.95    288.70    57.48      130   442.15   442.15  strncasematch
</pre><p>

The "seconds" columns are really CPU opcodes, 1/100 second per opcode.
So, "231.22" above means 23,122 opcodes.  The ms/call values are 10x
too big; 1574.57 means 157.457 opcodes per call.  Similar adjustments
need to be made for the "self" and "children" columns in the second
part of the report.
</p><p>
OK, so now we've got a huge report that took a long time to generate,
and we've identified a spot we want to work on optimizing.  Let's say
it's the time() function.  We can use SSP to selectively profile this
function by using OutputDebugString() to control SSP from within the
program.  Here's a sample program:

</p><pre class="screen">
	#include &lt;windows.h&gt;
	main()
	{
	  time_t t;
	  OutputDebugString("ssp on");
	  time(&amp;t);
	  OutputDebugString("ssp off");
	}
</pre><p>
</p><p>
Then, add the <code class="literal">-d</code> option to ssp to default to 
*disabling* profiling.  The program will run at full speed until the first 
OutputDebugString, then step until the second.
You can then use <span><strong class="command">gprof</strong></span> (as usual) to see the performance 
profile for just that portion of the program's execution.
</p><p>
There are many options to ssp.  Since step-profiling makes your
program run about 1,000 times slower than normal, it's best to
understand all the options so that you can narrow down the parts
of your program you need to single-step.
</p><p>
<code class="literal">-v</code> - verbose.  This prints messages about threads 
starting and stopping, OutputDebugString calls, DLLs loading, etc.
</p><p>
<code class="literal">-t</code> and <code class="literal">-c</code> - tracing.  
With <code class="literal">-t</code>, *every* step's address is written
to the file "trace.ssp".  This can be used to help debug functions,
since it can trace multiple threads.  Clever use of scripts can match
addresses with disassembled opcodes if needed.  Warning: creates
*huge* files, very quickly.  <code class="literal">-c</code> prints each address to 
the console, useful for debugging key chunks of assembler.  Use 
<code class="literal">addr2line -C -f -s -e foo.exe &lt; trace.ssp &gt; lines.ssp</code>
and then <code class="literal">perl cvttrace</code> to convert to symbolic traces.
</p><p>
<code class="literal">-s</code> - subthreads.  Usually, you only need to trace the 
main thread, but sometimes you need to trace all threads, so this enables that.
It's also needed when you want to profile a function that only a
subthread calls.  However, using OutputDebugString automatically
enables profiling on the thread that called it, not the main thread.
</p><p>
<code class="literal">-l</code> - dll profiling.  Generates a pretty table of how much 
time was spent in each dll the program used.  No sense optimizing a function in
your program if most of the time is spent in the DLL.
I usually use the <code class="literal">-v</code>, <code class="literal">-s</code>, and 
<code class="literal">-l</code> options:

</p><pre class="screen">
$ ssp <code class="literal">-v</code> <code class="literal">-s</code> <code class="literal">-l</code> <code class="literal">-d</code> 0x61001000 0x61080000 hello.exe
</pre><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="strace"></a>strace</h3></div></div></div><pre class="screen">
Usage: strace.exe [OPTIONS] &lt;command-line&gt;
Usage: strace.exe [OPTIONS] -p &lt;pid&gt;
Trace system calls and signals

  -b, --buffer-size=SIZE       set size of output file buffer
  -d, --no-delta               don't display the delta-t microsecond timestamp
  -f, --trace-children         trace child processes (toggle - default true)
  -h, --help                   output usage information and exit
  -m, --mask=MASK              set message filter mask
  -n, --crack-error-numbers    output descriptive text instead of error
                               numbers for Windows errors
  -o, --output=FILENAME        set output file to FILENAME
  -p, --pid=n                  attach to executing program with cygwin pid n
  -q, --quiet                  toggle "quiet" flag.  Defaults to on if "-p",
                               off otherwise.
  -S, --flush-period=PERIOD    flush buffered strace output every PERIOD secs
  -t, --timestamp              use an absolute hh:mm:ss timestamp insted of 
                               the default microsecond timestamp.  Implies -d
  -T, --toggle                 toggle tracing in a process already being
  -u, --usecs                  toggle printing of microseconds timestamp
                               traced. Requires -p &lt;pid&gt;
  -v, --version                output version information and exit
  -w, --new-window             spawn program under test in a new window

    MASK can be any combination of the following mnemonics and/or hex values
    (0x is optional).  Combine masks with '+' or ',' like so:

                      --mask=wm+system,malloc+0x00800

    Mnemonic Hex     Corresponding Def  Description
    =========================================================================
    all      0x00001 (_STRACE_ALL)      All strace messages.
    flush    0x00002 (_STRACE_FLUSH)    Flush output buffer after each message.
    inherit  0x00004 (_STRACE_INHERIT)  Children inherit mask from parent.
    uhoh     0x00008 (_STRACE_UHOH)     Unusual or weird phenomenon.
    syscall  0x00010 (_STRACE_SYSCALL)  System calls.
    startup  0x00020 (_STRACE_STARTUP)  argc/envp printout at startup.
    debug    0x00040 (_STRACE_DEBUG)    Info to help debugging. 
    paranoid 0x00080 (_STRACE_PARANOID) Paranoid info.
    termios  0x00100 (_STRACE_TERMIOS)  Info for debugging termios stuff.
    select   0x00200 (_STRACE_SELECT)   Info on ugly select internals.
    wm       0x00400 (_STRACE_WM)       Trace Windows msgs (enable _strace_wm).
    sigp     0x00800 (_STRACE_SIGP)     Trace signal and process handling.
    minimal  0x01000 (_STRACE_MINIMAL)  Very minimal strace output.
    exitdump 0x04000 (_STRACE_EXITDUMP) Dump strace cache on exit.
    system   0x08000 (_STRACE_SYSTEM)   Serious error; goes to console and log.
    nomutex  0x10000 (_STRACE_NOMUTEX)  Don't use mutex for synchronization.
    malloc   0x20000 (_STRACE_MALLOC)   Trace malloc calls.
    thread   0x40000 (_STRACE_THREAD)   Thread-locking calls.
</pre><p>The <span><strong class="command">strace</strong></span> program executes a program, and
optionally the children of the program, reporting any Cygwin DLL output
from the program(s) to stdout, or to a file with the <code class="literal">-o</code>
option.  With the <code class="literal">-w</code> option, you can start an strace
session in a new window, for example:

</p><pre class="screen">
$ strace -o tracing_output -w sh -c 'while true; do echo "tracing..."; done' &amp;
</pre><p>
This is particularly useful for <span><strong class="command">strace</strong></span> sessions that
take a long time to complete.
</p><p>
Note that <span><strong class="command">strace</strong></span> is a standalone Windows program and so does 
not rely on the Cygwin DLL itself (you can verify this with 
<span><strong class="command">cygcheck</strong></span>). As a result it does not understand symlinks.
This program is mainly useful for debugging the Cygwin DLL itself.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="umount"></a>umount</h3></div></div></div><pre class="screen">
Usage: umount.exe [OPTION] [&lt;posixpath&gt;]
Unmount filesystems

  -h, --help                    output usage information and exit
  -U, --remove-user-mounts      remove all user mounts
  -v, --version                 output version information and exit
</pre><p>The <span><strong class="command">umount</strong></span> program removes mounts from the
mount table in the current session.  If you specify a POSIX path that
corresponds to a current mount point, <span><strong class="command">umount</strong></span> will
remove it from the current mount table.  Note that you can only remove
user mount points.  The <code class="literal">-U</code> flag may be used to
specify removing all user mount points from the current user session.</p><p>See <a href="using.html#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> for more information on the mount
table.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-cygserver.html">Prev</a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="using.html">Up</a></td><td width="40%" align="right">&#160;<a accesskey="n" href="using-effectively.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Cygserver&#160;</td><td width="20%" align="center"><a accesskey="h" href="cygwin-ug-net.html">Home</a></td><td width="40%" align="right" valign="top">&#160;Using Cygwin effectively with Windows</td></tr></table></div></body></html>
