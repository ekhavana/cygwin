<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from readme.texinfo on 18 May 1998 -->

<TITLE>README 19.5 for GNU-Win32 b19.1.
</TITLE>
</HEAD>
<BODY>
<H1>README 19.5 for GNU-Win32 b19.1.</H1>
<P>
<P><HR><P>



<H1><A NAME="SEC1" HREF="readme_toc.html#TOC1">GNU-Win32 Resources on the Internet</A></H1>



<H2><A NAME="SEC2" HREF="readme_toc.html#TOC2">FTP Sites</A></H2>

<P>
The primary ftp site is
<TT>`ftp://go.cygnus.com/pub/ftp.cygnus.com/gnu-win32'</TT>.  There
are also several mirrors:

</P>

<UL>
<LI>North America:


<UL>
<LI>Alberta: <TT>`ftp://ftp.reversion.ca/pub/mirrors/gnu-win32'</TT>

<LI>Arizona: <TT>`ftp://ftp.ninemoons.com/pub/gnu-win32'</TT>

<LI>California: <TT>`ftp://go.cygnus.com/pub/ftp.cygnus.com/gnu-win32'</TT>

<LI>California: <TT>`ftp://ftp.yggdrasil.com/mirrors/site/ftp.cygnus.com/pub/gnu-win32'</TT>

<LI>California (secondary): <TT>`ftp://ftp.cygnus.com/pub/gnu-win32'</TT>

<LI>Tennessee: <TT>`ftp://sunsite.utk.edu/pub/gnu-win32'</TT>

</UL>

<LI>Central America:


<UL>
<LI>Costa Rica: <TT>`ftp://sunsite.ulatina.ac.cr/gnu-win32'</TT>

</UL>

<LI>South America:


<UL>
<LI>Brazil: <TT>`ftp://ftp.unicamp.br/pub/gnu/=EXTRA=/cygnus/win32'</TT>

</UL>

<LI>Africa:


<UL>
<LI>South Africa: <TT>`ftp://ftp.sun.ac.za/sites/ftp.cygnus.com/pub/gnu-win32'</TT>

</UL>

<LI>Asia:


<UL>
<LI>Japan: <TT>`ftp://ftp.crl.go.jp/pub/GNU/cygnus/gnu-win32'</TT>

<LI>Japan: <TT>`ftp://sysg.kek.jp/cygnus'</TT>

<LI>Japan: <TT>`ftp://ftp.u-aizu.ac.jp/pub/gnu/gnu-win32'</TT>

<LI>Korea: <TT>`ftp://cair-archive.kaist.ac.kr/pub/gnu/gnu-win32'</TT>

</UL>

<LI>Australasia:


<UL>
<LI>Australia: <TT>`ftp://mirror.aarnet.edu.au/pub/gnu-win32'</TT>

</UL>

<LI>Europe:


<UL>
<LI>Austria: <TT>`ftp://gd.tuwien.ac.at/pub/gnu/gnu-win32'</TT>

<LI>Czech Republic: <TT>`ftp://sunsite.ms.mff.cuni.cz/MIRRORS/ftp.cygnus.com/pub/gnu-win32/'</TT>

<LI>Denmark: <TT>`ftp://sunsite.auc.dk/pub/gnu-win32'</TT>

<LI>France: <TT>`ftp://ftp.fwntug.org/gnu'</TT>

<LI>France: <TT>`ftp://ftp.inria.fr/INRIA/Projects/Meta2/Scilab/Windows/cygwin/'</TT>

<LI>Germany: <TT>`ftp://ftp.franken.de/pub/win32/develop/gnuwin32/cygwin32/mirrors/cygnus/'</TT>

<LI>Greece: <TT>`ftp://ftp.ntua.gr/pub/pc/gnu-win32'</TT>

<LI>Hungary: <TT>`ftp://ftp.szrmkk.hu/pub/gnu-win32/ftp.cygnus.com'</TT>

<LI>Italy: <TT>`ftp://aaue.matrice.it/pub/gnu-win32'</TT>

<LI>Slovenia: <TT>`ftp://sunsite.fri.uni-lj.si/pub/gnu-win32'</TT>

<LI>Spain: <TT>`ftp://ftp.rediris.es/mirror/gnu-win32'</TT>

<LI>Sweden: <TT>`ftp://ftp.sunet.se/pub/gnu/gnu-win32'</TT>

<LI>Switzerland: <TT>`ftp://sunsite.cnlab-switch.ch/mirror/gnu-win32'</TT>

<LI>UK: <TT>`ftp://sunsite.doc.ic.ac.uk/packages/gnu/cygnus/gnu-win32'</TT>

<LI>Ukraine: <TT>`ftp://ftp.ics-co.kiev.ua/pub/mirror/ftp.cygnus.com/pub/gnu-win32'</TT>

</UL>

</UL>



<H2><A NAME="SEC3" HREF="readme_toc.html#TOC3">The Project WWW Site</A></H2>

<P>
The main WWW page for the GNU-Win32 project is
http://www.cygnus.com/misc/gnu-win32/

</P>
<P>
A page containing tool-specific information is
http://www.cygnus.com/pubs/gnupro/

</P>
<P>
Links to additional documentation are accessible from the main
web page.


<H1><A NAME="SEC4" HREF="readme_toc.html#TOC4">Installation Instructions</A></H1>


<H2><A NAME="SEC5" HREF="readme_toc.html#TOC5">Contents</A></H2>

<P>
The following packages are included in the full release:

</P>
<P>
Cygnus Developer's Kit (CDK):
binutils, bison, byacc, dejagnu, diff, expect, flex, gas, gcc, gdb,
itcl, ld, libg++, libstdc++, make, patch, tcl, tix, tk

</P>
<P>
user tools:
ash, bash, diff, fileutils, findutils, gawk, grep, gzip, m4, sed,
shellutils, tar, textutils, time

</P>
<P>
The user tools release only contains the user tools.

</P>
<P>
Full source code is available for these tools.  It is split into
these two units.  Ash is provided separately for now.

</P>


<H2><A NAME="SEC6" HREF="readme_toc.html#TOC6">Installing the binary release:</A></H2>

<P>
Important!  Be sure to move out of the way any older versions of
the gnu-win32 tools that exist in your $PATH (or delete them).

</P>
<P>
Connect to one of the ftp servers listed above and cd to the directory
containing the latest release.  On our primary server, that would be:

</P>
<P>
<TT>`ftp://go.cygnus.com/pub/ftp.cygnus.com/gnu-win32/latest'</TT>.

</P>
<P>
If you want the development tools and the programs necessary to run
the GNU configure mechanism, you should download the whole release
called <TT>`cdk.exe'</TT>.  If you only care about the user tools listed
above, download <TT>`usertools.exe'</TT>.

</P>
<P>
If you have an unreliable connection, download the binary in
smaller chunks instead.  For the split cdk installer, get the files in
the <TT>`cdk-split'</TT> subdirectory.  Once downloaded, combine the split
files at the command prompt by doing a:

</P>

<PRE>
copy /b xaa + xab + xac + ... + xai + xaj cdk.exe
del xa*.*
</PRE>

<P>
The same process can be used for the user tools.

</P>
<P>
Once you have an install executable on your system, run it.
First off, the installer will prompt you for a location to
extract the temporary files it needs to install the release on your
system.  The default should be fine for most people.

</P>
<P>
Next it will ask you to choose a default install location,
<TT>`&#60;system-drive&#62;:\cygnus\b19'</TT>.  Feel free to choose another
location if you would prefer.

</P>
<P>
Finally, it will ask you for the name of the Program Files folder
shortcut to add.  The default is <TT>`Cygwin32 Beta 19'</TT>.  When this
step is completed, it will install the tools and exit.

</P>
<P>
At this point, you should be able to look under the start menu and
select "Cygwin32 Beta 19" (or whatever you named it).  This will
pop up a bash shell with all special environment variables set up
for you.  If you are running Windows 95 and are faced with the error
message "Out of environment space", you need to increase the amount
of environment space in your config.sys and try again.  Adding the line
<CODE>shell=C:\command.com /e:4096 /p</CODE> should do the trick if <CODE>C:</CODE>
is your system drive letter.

</P>
<P>
There are two remaining thing you should do from this prompt.
First, you need to type <CODE>mkdir -p /tmp</CODE> to ensure that a
temp directory exists for programs that expect to find one there.

</P>
<P>
Second, if you are installing the full distribution (<TT>`cdk.exe'</TT>),
various programs will need to be able to find <TT>`/bin/sh'</TT>.  You
should <TT>`mkdir -p /bin'</TT> and put a copy of <TT>`sh.exe'</TT> there,
removing the older version, if present.  You can use the <TT>`mount'</TT>
utility to select which drive letter is mounted as <TT>`/'</TT>. See the
Frequently Asked Questions (FAQ) file for more information on
<TT>`mount'</TT>.

</P>
<P>
And you should be done!

</P>
<P>
If you should ever want to uninstall the tools, you may do so
via the "Add/Remove Programs" control panel.

</P>


<H2><A NAME="SEC7" HREF="readme_toc.html#TOC7">Updating to GNU-Win32 Beta 19.1</A></H2>

<P>
An update to the Cygwin32 library is available from the GNU-Win32
ftp sites in the directory gnu-win32-b19/b19.1-update.  This fixes
several serious problems (including general instability under Win 95 and
some network communication problems visible under both 95 and NT).
There is a README file in the directory that explains how to install
the update.

</P>


<H2><A NAME="SEC8" HREF="readme_toc.html#TOC8">Installing the source code</A></H2>

<P>
Before downloading the source code corresponding to the release,
you should install the latest release of the tools (either the full
release or just the user tools).

</P>
<P>
Create the directory that will house the source code.  <TT>`cd'</TT>
there.

</P>
<P>
Connect to one of the ftp servers listed above and cd to the directory
containing the latest release.  On our primary server, that would be:

</P>
<P>
<TT>`ftp://go.cygnus.com/pub/ftp.cygnus.com/gnu-win32/latest'</TT>.

</P>
<P>
If you want the user tools source code, <TT>`cd'</TT> into the
<TT>`usertools-src'</TT> subdirectory.  Download the files there.  If you
want the Cygnus Developer's Kit sources, <TT>`cd'</TT> into the
<TT>`cdk-src'</TT> subdirectory.  Download the files there.

</P>
<P>
Back in the command.com, for the user tools source:

</P>

<PRE>
copy /b xba + xbb + xbc + xbd + xbe + xbf + xbg usersrc.tar.gz
del xb*.*
gunzip -d usersrc.tar.gz
tar xvf usersrc.tar
</PRE>

<P>
For the compiler tools source:

</P>

<PRE>
copy /b xca + xcb + xcc + xcd + ... + xck + xcl cdksrc.tar.gz
del xc*.*
gunzip -d cdksrc.tar.gz
tar xvf cdksrc.tar
</PRE>

<P>
Both will expand into a directory called <TT>`src'</TT>.

</P>
<P>
And you should be done...

</P>



<H1><A NAME="SEC9" HREF="readme_toc.html#TOC9">Release Beta 19 (Feb 26 1998)</A></H1>
<P>
This is a major release.  It includes a much-updated version of the
Cygwin32 library.  Because the Cygwin API has changed in incompatible
ways, the dll has been renamed cygwinb19.dll to avoid invalidating
previously built executables.

</P>
<P>
Note that a B19-compiled application exec()ing a B18-compiled
application will treat the B18-compiled executable as an ordinary
Win32 executable.  This means that open file descriptors and some other
internals will not be inheritted on exec() calls.  The reason for this
is that different shared memory areas are used by the different versions
of the cygwin library.  This may or may not be of importance to you
depending on what you're doing.

</P>
<P>
The Beta 19 release of the Cygwin32 library continues to be licensed
under the GNU General Public License (GPL).

</P>
<P>
The PE format definition used by the compiler tools now matches
Microsoft's more closely.  This should allow better interoperability
with other vendors' development tools although more work probably
remains to be done in this area.  This change invalidates all previously
built object (.o) and static library (.a) files so be sure to
delete/rebuild old .o and .a files you are using!

</P>
<P>
Finally, old symlinks are invalidated by this release.  The "system"
attribute is now used to mark symlinks which significantly speeds
up fstat and other file related calls.  Either recreate old ones or
set their "system" attribute flag so they will be recognized properly.

</P>
<P>
The new installer takes care of all environment variable settings
automatically by installing a shortcut in program files that pulls
up a bash prompt with all the correct environment variables set.
As a result, the setup process should be much cleaner than in the last
release.

</P>
<P>
For those of you who end up moving the tools around, the batch file
that sets up the default environment is called cygnus.bat and is
installed in the root of the install directory.  Because the tools have
been compiled to install in /cygnus/b19, when installed in this
location, the tools should "just work" if the bin directory is in your
path (no special environment variables are needed).  The only exception
is MAKE_MODE which needs to be set if you want to get ordinary Unix-like
make behavior -- see the make notes below for more information.

</P>


<H3><A NAME="SEC10" HREF="readme_toc.html#TOC10">Changes in specific tools:</A></H3>

<P>
Ian Lance Taylor has written a resource compiler called "windres".
It can be used to compile windows resources from a textual rc file
into a COFF file.  The sources are in the binutils subdirectory of
the sources.

</P>
<P>
We have upgraded many of the utilities.  Beta 19 includes bash 2.01.1,
fileutils 3.16, gawk 3.0.3, patch 2.5, shellutils 1.16, tar 1.12,
textutils 1.22, and texinfo 3.11.  Bash under Cygwin32 now includes
working job control among other improvements.

</P>
<P>
The sh executable is now ash 0.2 from the Debian Linux distribution.
Using this more minimal shell as /bin/sh.exe speeds up configures
significantly.

</P>
<P>
Bison 1.25 has been added.

</P>
<P>
Tcl/tk are upgraded to version 8.0.  Compatible versions of tix and
itcl have been added.  These all include Cygwin32-compatible configury
files so you can do a Unix-style build of the Win32 ports of tcl/tk.

</P>
<P>
Expect 5.21.3 is included and basically works.

</P>
<P>
The binaries have been compiled with i686 optimizations turned on
which may result in a speed increase on Pentium-based systems
although the tools should work on i386 and later chips.

</P>
<P>
The linker (ld) has been enhanced -- it will now add the idata3
terminator automatically when linking dlls.

</P>
<P>
kill now supports signal names in arguments.  ps now shows process
start time information.

</P>
<P>
Although the default install of the tools should hide this detail, the
make utility now defaults to a Win32 mode which uses cmd.exe/command.com
as the subshell.  This mode allows the use of backslashes in filenames.
To build Unix programs, you need to set the MAKE_MODE environment
variable to "UNIX".  This way you will get the old behavior of using
sh.exe as the subshell.

</P>


<H3><A NAME="SEC11" HREF="readme_toc.html#TOC11">Changes in the Cygwin32 API (cygwin.dll):</A></H3>

<P>
The interface is now better defined.  It contains libc, libm, and
Unix compatability calls.  It no longer contains exports for libgcc.a.
This should result in a more stable interface.  See the calls.texinfo
document for interface documentation.

</P>
<P>
There is now only one environment variable called CYGWIN32 that controls
the overall behavior of the dll:

</P>
<P>
        set CYGWIN32=[no]title [no]strip_title [no]binmode [no]glob
                strace=mask:cache,file [no]tty

</P>
<P>
So if you "set CYGWIN32=title tty", then you would get tty support
(see below) and have the current running process listed in the title
bar.

</P>
<P>
B19 adds support for:

</P>
<P>
* tty and pseudo-tty devices.  For now, ttys default to off because
taking over the console causes problems with using non-Cygwin console
programs in a Cygwin console.  To turn it on, set the environment
variable CYGWIN32 to include "tty".
* Hard links (requires NT on an NTFS filesystem).  When not possible (on
non-NTFS filesystems), link() will make a copy of the file in question
as it has done in previous releases.
* The SIGWINCH signal.  If tty handling is enabled then the process will
receive a SIGWINCH signal when the screen size changes.
* Additional terminal escape sequences recognized: scroll region setting via
&#60;ESC&#62;[n1;n2r and setting the console title using xterm escape sequence:
&#60;ESC&#62;[2;new title^G .

</P>
<P>
The following calls have been added:

</P>
<P>
* ptsname, grantpt, unlockpt
* login, logout, ttyslot, ctermid
* cfgetispeed, cfgetospeed, cfsetispeed, cfsetospeed
* setitimer, getitimer, ftime, tzset
* wait3, wait4, pause, sigpause
* getpgid, killpg, setegid (stub)
* strlwr, strupr
* sexecve, sexecl, sexecle, sexeclp, sexeclpe, sexecv, sexecp, sexecvpe
* rcmd, rresvport, rexec
* strsignal, strtosigno
* dlopen, dlsym, dlclose, dlerror
* inet_netof, inet_makeaddr
* socketpair
* fpathconf, realpath, chroot (stub)
* initgroups (stub), getgroups
* random, srandom

</P>
<P>
The following calls have been removed:

</P>
<P>
* ScreenCols, ScreenGetCursor, ScreenRows, ScreenSetCursor
* getkey, kbhit
* crypt (stub)
* all libgcc.a exports

</P>
<P>
The Winsock dll (wsock32.dll) is no longer implicitly linked into
the Cygwin32 dll.  Instead, it is explicitly loaded with LoadLibrary
the first time a process calls a Cygwin32 networking function.  This
speeds up most processes significantly (configures by about 20%).

</P>
<P>
The signal-related code has been rewritten from scratch.  Ditto for
most of the path handling code.

</P>
<P>
The globbing and getopt code has been replaced with BSD-derived
code.  The regexp code has been replaced with Henry Spencer's PD
implementation.

</P>
<P>
Doug Lea's malloc is now being used as the default malloc exported by
cygwin.  This malloc balances speed and compactness very nicely but is
more unforgiving when attempts are made to free already freed memory,
i.e., a segmentation violation will occur.

</P>
<P>
The bsearch call has been rewritten.

</P>
<P>
Alt Gr-key behavior has been changed in this release.  The left alt-key
still produces ESC-key sequence.  The right alt (Alt Gr)-key now
produces characters according to national keyboard layouts.

</P>
<P>
Processes no longer write their name in the title bar unless you include
"title" in the CYGWIN32 environment variable (see above).

</P>
<P>
Multiple cygwin.dlls no longer use the same memory space unless they are
identical (built at the same time).  This allows multiple dlls with
incompatible shared memory usage to be run simultaneously.  It also
facilitates debugging a buggy cygwin.dll.  By keeping only a single copy
of the latest cygwin.dll on your system, you can be assured of having
all cygwin processes exist in the same shared memory space.

</P>
<P>
The slash mount no longer defaults to C:.  It now defaults to the
system drive letter (where the OS is installed).

</P>
<P>
The standard dl* dynamic library loader functions are now available.
Cygwin32 B19 now correctly copies data after a fork and automatically
reloads any DLLs loaded in the parent process.  In addition, dlls will
now be correctly initialized when loaded and global constructors will
be called.  Global destructors will be called when the DLL is detached.
Handles gotten from dlopen or dlsym in the parent will be accessible in a
forked child.  The LD_LIBRARY_PATH environment variable is used in the dlopen
search.

</P>
<P>
Include the file &#60;cygwin32/cygwin_dll.h&#62; in a cygwin32 created .dll and
use the line DECLARE_CYGWIN_DLL(dll-entry-point) to produce .dlls that
can be used with these functions.

</P>


<H1><A NAME="SEC12" HREF="readme_toc.html#TOC12">Known/potential Problems in the B19 Release</A></H1>



<H2><A NAME="SEC13" HREF="readme_toc.html#TOC13">Windows 95 freezing up</A></H2>
<P>
Control-c's in bash under Win 95 can lock up the Win 95 kernel,
freezing your machine.  This problem can be fixed if you are running
the OSR2 version of Win 95 by installing the USB patch available on
OSR2 CDs or on MSDN subscription CDs.  More information about OSR2
and the USB patch is available from
<TT>`http://www.compuclinic.com/osr2faq/index.html'</TT>.

</P>


<H2><A NAME="SEC14" HREF="readme_toc.html#TOC14">Problems running non-cygwin applications from bash</A></H2>
<P>
Interactive non-cygwin command line programs (like cmd.exe) fail
to run in beta 19 (they exit immediately).  This problem was fixed
as of the b19.1 update release.

</P>


<H2><A NAME="SEC15" HREF="readme_toc.html#TOC15">Long pause occurs randomly in bash</A></H2>
<P>
It has been reported that bash will hang for several seconds upon
occasion.  We are looking into this problem.  It does not
seem to occur when bash is started under a command prompt.
Reportedly, if you specify the 'Start in' directory in the shortcut,
the problem goes away.

</P>


<H2><A NAME="SEC16" HREF="readme_toc.html#TOC16">Setting CYGWIN32 environment variable causes crash in 19.1</A></H2>
<P>
This is a known problem.  The 19.2 update release will address this,
among other bugs not fixed in the 19.1 update.

</P>


<H2><A NAME="SEC17" HREF="readme_toc.html#TOC17">Configures sometimes die in a weird way</A></H2>
<P>
Although ash as /bin/sh works fine for rebuilding the compiler tools,
you may need to use a copy of bash.exe as /bin/sh to configure
some other packages due to a quoting bug.  This will be fixed in
the next major release.

</P>


<H2><A NAME="SEC18" HREF="readme_toc.html#TOC18">Programs can't deal with // pathname scheme in arguments</A></H2>
<P>
gcc and other tools aren't fully compatible with the current pathname
scheme: it can't grok an argument of -I//d/foo which means it is vital
that when attempting to self-host, that only normal paths with single
slashes are used.

</P>


<H2><A NAME="SEC19" HREF="readme_toc.html#TOC19">DOS special filenames</A></H2>
<P>
Files cannot be named com1, lpt1, or aux (to name a few); either as
the root filename or as the extension part.  If you do, you'll have
trouble.  Unix programs don't avoid these names which can make things
interesting.  Eg, the perl distribution has a file called <CODE>aux.sh</CODE>.
The perl configuration tries to make sure that <CODE>aux.sh</CODE> is there,
but an operation on a file with the magic letters 'aux' in it will hang.

</P>


<H2><A NAME="SEC20" HREF="readme_toc.html#TOC20">Stripped Tcl/Tk shells give Out of Mem error</A></H2>

<P>
The stripped cygtclsh80.exe and cygwish80.exe provided
as part of b19 is corrupted.
If you rebuild it from the sources with debugging information, you
should not have this problem.

</P>
<P>
Or, download replacements from
<TT>`ftp://ftp.xraylith.wisc.edu/pub/khan/tcl/tcltk-cygb19-fixed.tar.gz'</TT>.

</P>


<H2><A NAME="SEC21" HREF="readme_toc.html#TOC21">Stripping dlls</A></H2>

<P>
Dll's with a .reloc section can't be stripped,
if they are built using the default B19 linker.  This is because
removing the .stab and .stabstr sections creates a hole in the image
that the run time linker can't deal with.  The easiest workaround is
to link your dll with -s.

</P>


<H2><A NAME="SEC22" HREF="readme_toc.html#TOC22">User defined mallocs.</A></H2>
<P>
If you define a function called <CODE>malloc</CODE> in your own code, and link
with the DLL, the DLL <EM>will</EM> call your <CODE>malloc</CODE>.  You'd better
make sure that your malloc more or less works.

</P>
<P>
If you run any programs from the DOS command prompt, rather than from in
bash, the DLL will try and expand the wildcards on the command line.
This process uses <CODE>malloc</CODE> <EM>before</EM> your main line is started.
If you have written your own <CODE>malloc</CODE> to need some initialization
to occur after <CODE>main</CODE> is called, then this will surely break.

</P>


<H2><A NAME="SEC23" HREF="readme_toc.html#TOC23">Mixed case filenames.</A></H2>
<P>
The perl config causes some other problems too; the config&#60;foo&#62;.SH
scripts generate a file called "Makefile", and use and delete a file
called "makefile" on the way.  Because of the Win32 API's case
insensitivity, this will nuke Makefile, leaving you with nothing.

</P>
<P>
Geoffrey Noer
noer@cygnus.com
<P><HR><P>
This document was generated on 18 May 1998 using the
<A HREF="http://wwwcn.cern.ch/dci/texi2html/">texi2html</A>
translator version 1.51.</P>
</BODY>
</HTML>
